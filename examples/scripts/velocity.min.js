/**
 * Velocity - v1.0.0-alpha1 - 2019-09-03
 * Description: Velocity is a JavaScript library which provide utilities, ui components and MVC framework implementation.
 * License: GPL-3.0-or-later
 * Author: Bhagwat Singh Chouhan
 */


var cmt=cmt||{};if(cmt.utils=cmt.utils||{},cmt.utils.ajax={triggerPost:function(t,e,i){(void 0===i&&(i=!0),i&&null!=jQuery("meta[name=csrf-token]"))&&(e+="&"+jQuery("meta[name=csrf-param]").attr("content")+"="+jQuery("meta[name=csrf-token]").attr("content"));jQuery.post(t,e)}},cmt.utils.browser={isXhr:function(){return(new XMLHttpRequest).upload},isFileApi:function(){return window.File&&window.FileList&&window.FileReader},isFormData:function(){return!!window.FormData},isCanvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},isCanvasDataUrl:function(){return 0==document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")},isHistory:function(){return!(void 0===history.pushState)}},cmt.utils.data={weekDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],serialiseElement:function(t,e){var i=[],n=null;void 0===e&&(e=!0),n="string"==typeof t?jQuery("#"+t).find(":input").get():t.find(":input").get(),jQuery.each(n,function(){if(this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))){var t=jQuery(this).val();i.push(encodeURIComponent(this.name)+"="+encodeURIComponent(t))}});var o=i.join("&").replace(/%20/g,"+");e&&null!=jQuery("meta[name=csrf-token]")&&(o+="&"+jQuery("meta[name=csrf-param]").attr("content")+"="+jQuery("meta[name=csrf-token]").attr("content"));return o},elementToJson:function(t,e){var i=[],n=null;return void 0===e&&(e=!0),n="string"==typeof t?jQuery("#"+t).find(":input").get():t.find(":input").get(),jQuery.each(n,function(){if(this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))){var t=jQuery(this).val();i.push({name:this.name,value:t})}}),cmt.utils.data.generateJsonMap(i,e)},serialiseForm:function(t,e){var i=null;(void 0===e&&(e=!0),i="string"==typeof t?jQuery("#"+t).serialize():t.serialize(),e&&null!=jQuery("meta[name=csrf-token]"))&&(i+="&"+jQuery("meta[name=csrf-param]").attr("content")+"="+jQuery("meta[name=csrf-token]").attr("content"));return i},formToJson:function(t,e){var i=null;return void 0===e&&(e=!0),i="string"==typeof t?jQuery("#"+t).serializeArray():t.serializeArray(),cmt.utils.data.generateJsonMap(i,e)},generateJsonMap:function(t,e){var o={};if(e&&null!=jQuery("meta[name=csrf-token]")){var i=jQuery("meta[name=csrf-param]").attr("content"),n=jQuery("meta[name=csrf-token]").attr("content");t.push({name:i,value:n})}return jQuery.map(t,function(t,e){if(-1<t.name.indexOf("[")){var i=o;_name=t.name.replace(/\]/gi,"").split("[");e=0;for(var n=_name.length;e<n;e++)e==n-1?i[_name[e]]?("string"==typeof i[_name[e]]&&(i[_name[e]]=[i[_name[e]]]),i[_name[e]].push(t.value)):i[_name[e]]=t.value||"":i=i[_name[e]]=i[_name[e]]||{}}else void 0!==o[t.name]?(o[t.name].push||(o[t.name]=[o[t.name]]),o[t.name].push(t.value||"")):o[t.name]=t.value||""}),o},appendCsrf:function(t){null!=jQuery("meta[name=csrf-token]")&&(t=t+"&"+jQuery("meta[name=csrf-param]").attr("content")+"="+jQuery("meta[name=csrf-token]").attr("content"));return t},getParameterByName:function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},updateUrlParam:function(t,e,i){var n,o,a="",r=jQuery("<a />").attr("href",t)[0],s=/\+/g,l=/([^&=]+)=?([^&]*)/g,c=function(t){return decodeURIComponent(t.replace(s," "))},d=r.search.substring(1);for(n={};o=l.exec(d);)n[c(o[1])]=c(o[2]);if(e||i){if(e&&!i)return n[e];n[e]=i;var u=[];for(var p in n)u.push(encodeURIComponent(p)+"="+encodeURIComponent(n[p]));return 0<u.length&&(a="?"+u.join("&")),r.origin+r.pathname+a}return n},removeParam:function(t,e){var i=t.split("?")[0],n=[],o=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==o){for(var a=(n=o.split("&")).length-1;0<=a;a-=1)n[a].split("=")[0]===e&&n.splice(a,1);i=i+"?"+n.join("&")}return"?"==i.slice(-1)&&(i=i.slice(0,-1)),i},updateUriParam:function(t,e,i){var n=new RegExp("([?&])"+e+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?";return t.match(n)?t.replace(n,"$1"+e+"="+i+"$2"):t+o+e+"="+i},refreshGrid:function(){var t=window.location.href;t=cmt.utils.data.removeParam(t,"page"),t=cmt.utils.data.removeParam(t,"per-page"),window.location=t},hasAttribute:function(t,e){var i=t.attr(e);return void 0!==i&&!1!==i},bindEditor:function(t){var e=jQuery(t);if(jQuery.cleditor&&!e.parent().hasClass("cleditorMain")){e.cleditor({docType:"<!DOCTYPE html>",controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule link unlink | source",height:165})}else e.parent().hasClass("cleditorMain")&&(e.hasClass("add")?e.val("").blur():e.val(e.val()).blur())},dataURItoBlob:function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),o=new DataView(n),a=0;a<e.length;a++)o.setUint8(a,e.charCodeAt(a));return new Blob([n],{type:i})}},Function.prototype.inherits=function(a){var r=0,s=this.prototype=new a;this.prototype.uber=function(t){var e,i,n=r,o=a.prototype;if(n){for(;n;)o=o.constructor.prototype,n-=1;e=o[t]}else(e=s[t])==this[t]&&(e=o[t]);return r+=1,i=e.apply(this,Array.prototype.slice.apply(arguments,[1])),r-=1,i}},"#_=_"==window.location.hash)if(history.replaceState){var cleanHref=window.location.href.split("#")[0];history.replaceState(null,null,cleanHref)}else window.location.hash="";function showPopup(t){var e=jQuery(t);e.hasClass("popup-modal")&&jQuery("body").css({overflow:"hidden",height:jQuery(window).height()}),e.fadeIn("slow"),e.hasClass("popup-modal")&&jQuery.fn.cmtPopup.reposition(e)}function closePopup(t){jQuery(t).hasClass("popup-modal")&&jQuery("body").css({overflow:"",height:"","margin-right":""}),jQuery(t).fadeOut("fast")}function showErrorPopup(t){jQuery("#popup-error .popup-content").html(t),showPopup("#popup-error")}function hideErrorPopup(){closePopup("#popup-error")}function showMessagePopup(t){jQuery("#popup-message .popup-content").html(t),showPopup("#popup-message")}function hideMessagePopup(){closePopup("#popup-message")}Object.size=function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},cmt.utils.image={arDimensions:function(t,e,i){var n=0,o=t.width,a=t.height;return e<o&&(a*=n=e/o,o*=n),i<a&&(o*=n=i/a),new Array(o,a)},drawAtCanvasCenter:function(t,e){if(null!=t&&null!=e){var i=t.width,n=t.height,o=t.getContext("2d"),a=new Image,r=window.URL||window.webkitURL,s=r.createObjectURL(e);a.src=s,a.onload=function(){var t=cmt.utils.image.arDimensions(a,i,n);o.translate(i/2,n/2),o.drawImage(a,-t[0]/2,-t[1]/2,t[0],t[1]),o.translate(-i/2,-n/2),r.revokeObjectURL(s)}}}},cmt.utils.intltel={initIntlTelInput:function(t){var e=null!=t?t:"us";jQuery().intlTelInput&&(jQuery(".intl-tel-field-mb").intlTelInput({formatOnDisplay:!1,separateDialCode:!0,initialCountry:e,numberType:"MOBILE",preventInvalidNumbers:!0}),jQuery(".intl-tel-field-ph").intlTelInput({formatOnDisplay:!1,separateDialCode:!0,initialCountry:e,numberType:"FIXED_LINE",preventInvalidNumbers:!0}),jQuery(".intl-tel-field").each(function(){cmt.utils.intltel.populateIntlField(jQuery(this))}),jQuery(".intl-tel-field").on("blur",function(){cmt.utils.intltel.validateIntlField(jQuery(this))}),jQuery(".intl-tel-input").closest(".form").on("submit",function(){var e=!0;return jQuery(this).find(".intl-tel-field").each(function(){var t=jQuery(this);cmt.utils.intltel.validateIntlField(t)||(e=!1)}),e}))},initIntlTelField:function(t){if(jQuery().intlTelInput&&(null!=t&&0!=t.length))switch(cmt.utils.data.hasAttribute(t,"data-intl-type")?t.attr("data-intl-type"):"mobile"){case"mobile":cmt.utils.intltel.initMobileField(t);break;case"phone":cmt.utils.intltel.initPhoneField(t)}},initMobileField:function(e){var t=cmt.utils.data.hasAttribute(e,"data-ccode")?e.attr("data-ccode"):"us",i=cmt.utils.data.hasAttribute(e,"data-ccode-only")?e.attr("data-ccode-only"):null;null!=i?e.intlTelInput({formatOnDisplay:!1,separateDialCode:!0,initialCountry:t,numberType:"MOBILE",preventInvalidNumbers:!0,onlyCountries:[i]}):e.intlTelInput({formatOnDisplay:!1,separateDialCode:!0,initialCountry:t,numberType:"MOBILE",preventInvalidNumbers:!0}),cmt.utils.intltel.populateIntlField(e),e.on("blur",function(){cmt.utils.intltel.validateIntlField(e)}),e.closest(".form").on("submit",function(){var t=!0;return cmt.utils.intltel.validateIntlField(e)||(t=!1),t})},initPhoneField:function(e){var t=cmt.utils.data.hasAttribute(e,"data-ccode")?e.attr("data-ccode"):"us";jQuery(".intl-tel-field-ph").intlTelInput({formatOnDisplay:!1,separateDialCode:!0,initialCountry:t,numberType:"FIXED_LINE",preventInvalidNumbers:!0}),cmt.utils.intltel.populateIntlField(e),e.on("blur",function(){cmt.utils.intltel.validateIntlField(e)}),e.closest(".form").on("submit",function(){var t=!0;return cmt.utils.intltel.validateIntlField(e)||(t=!1),t})},validateIntlField:function(t){var e=t.closest(".form-group"),i=t.val(),n="+"+t.intlTelInput("getSelectedCountryData").dialCode;return""==i&&t.hasClass("intl-tel-required")?(e.find(".help-block").html("Mobile cannot be blank."),!1):0<i.length&&!t.intlTelInput("isValidNumber")?(e.find(".help-block").html("Mobile number format is wrong."),!1):(e.find(".help-block").html(""),t.intlTelInput("getNumber")!==n?e.find(".intl-tel-number").val(t.intlTelInput("getNumber")):e.find(".intl-tel-number").val(""),!0)},populateIntlField:function(t){var e=t.closest(".form-group").find(".intl-tel-number").val();0<e.length&&t.intlTelInput("setNumber",e)}},cmt.utils.object={strToObject:function(t){for(var e=t.split("."),i=window||this,n=0,o=e.length;n<o;n++)i=i[e[n]];var a=new i;if("object"!=typeof a)throw new Error(t+" not found");return a},hasProperty:function(t,e){var i=t.__proto__||t.constructor.prototype;return e in t&&(!(e in i)||i[e]!==t[e])}},cmt.utils.ui={alignMiddle:function(t,e){t=jQuery(t),e=jQuery(e);var i=t.height(),n=t.width(),o=e.height(),a=e.width();if(o<=i&&a<=n){var r=(i-o)/2,s=(n-a)/2;e.css({position:"absolute",top:r,left:s})}},initSelect:function(t){jQuery(t).cmtSelect({iconHtml:'<span class="cmti cmti-chevron-down"></span>'})},initSelectElement:function(t){t.cmtSelect({iconHtml:'<span class="cmti cmti-chevron-down"></span>'})},initActions:function(t){var e=jQuery(t);e.cmtActions(),e.find(".cmt-auto-hide").cmtAutoHide()},initActionsElement:function(t){t.cmtActions(),t.find(".cmt-auto-hide").cmtAutoHide()}},cmt.utils.validation={errors:{email:"Please provide a valid email address."},isEmail:function(t){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)},getEmailError:function(){return this.errors.email}},cmt.components=cmt.components||{},cmt.components.base=cmt.components.base||{},cmt.components.Root=function(t){this.components=[],this.activeComponents=[]},cmt.components.Root.prototype.mapComponent=function(t,e){null==this.components[t]&&(this.components[t]=e)},cmt.components.Root.prototype.getComponent=function(t,e,i){if(e=void 0!==e?e:{},null==this.components[t])throw"Component with alias "+t+" is not registered.";var n;if(i)return(n=cmt.utils.object.strToObject(this.components[t])).init(e),n;null==this.activeComponents[t]&&((n=cmt.utils.object.strToObject(this.components[t])).init(e),this.activeComponents[t]=n);return this.activeComponents[t]},cmt.components.Root.prototype.setComponent=function(t,e){null==this.activeComponents[t]&&(this.activeComponents[t]=e)},cmt.components.Root.prototype.registerComponent=function(t,e,i){return this.mapComponent(t,e),this.getComponent(t,i)},cmt.components.root=new cmt.components.Root,cmt.components.base.BaseComponent=function(t){},cmt.components.base.BaseComponent.prototype.init=function(t){},cmt.components.base.ActionsComponent=function(){this.counter=0,this.documentHeight=0,this.screenWidth=0,this.options=null},cmt.components.base.ActionsComponent.inherits(cmt.components.base.BaseComponent),cmt.components.base.ActionsComponent.prototype.defaults={listAlignment:"left"},cmt.components.base.ActionsComponent.prototype.init=function(t){this.documentHeight=jQuery(document).height(),this.screenWidth=jQuery(window).width(),this.options=jQuery.extend({},this.defaults,t)},cmt.components.base.ActionsComponent.prototype.initElements=function(t){var e=this;t.each(function(){var t=jQuery(this);e.initElement(t),e.counter++})},cmt.components.base.ActionsComponent.prototype.initElement=function(r){var t=this.counter,s=this.screenWidth,l=r.find(".actions-list-data"),c=this.options.listAlignment;r.find(".actions-list-title").attr("data-target","#actions-list-data-"+t),r.attr("data-idx",t),l.attr("data-idx",t),r.attr("id","actions-list-"+t),l.attr("id","actions-list-data-"+t),(l=l.detach()).appendTo("body"),cmt.utils.data.hasAttribute(l,"data-alignment")&&(c=l.attr("data-alignment")),r.find(".actions-list-title").click(function(){if(l.is(":hidden")){var t=r.offset(),e=c,i=t.top+r.height(),n=t.left,o=s-t.left-r.width(),a=l.width();"left"==c&&t.left+a+5>s?e="right":"right"==c&&t.left+a+5>r.width()&&(e="left"),"left"==e?l.css({top:i,left:n}):"right"==e&&l.css({top:i,right:o}),l.slideDown("slow")}else l.slideUp("slow")})},cmt.components.base.Collage=function(){this.limit=5,this.counter=0,this.config=[[{cr:{w:"f",h:"xl"}}],[{cl:{w:"h",h:"l"}},{cb:{w:"0",h:"l"}},{cl:{w:"h",h:"l"}}],[{cl:{w:"h",h:"xl"}},{cb:{w:"0",h:"xl"}},{cle:{w:"h",h:"xl",c:[{cr:{w:"f",h:"m"}},{cr:{w:"f",h:"m"}}]}}],[{cr:{w:"f",h:"xl"}},{cre:{w:"f",h:"l",c:[{cl:{w:"ot",h:"l"}},{cb:{w:"1",h:"l"}},{cl:{w:"ot",h:"l"}},{cb:{w:"1",h:"l"}},{cl:{w:"ot",h:"l"}}]}}],[{cre:{w:"f",h:"xl",c:[{cl:{w:"h",h:"xl"}},{cb:{w:"0",h:"xl"}},{cl:{w:"h",h:"xl"}}]}},{cre:{w:"f",h:"l",c:[{cl:{w:"ot",h:"l"}},{cb:{w:"0",h:"l"}},{cl:{w:"ot",h:"l"}},{cb:{w:"0",h:"l"}},{cl:{w:"ot",h:"l"}}]}}]]},cmt.components.base.Collage.prototype.generateView=function(t){var e=t.children(),i=this.config[e.length-1];return this.generateConfigView(i,e)},cmt.components.base.Collage.prototype.generateConfigView=function(t,e,i){for(var n=null!=i?'<div class="'+i+'">':'<div class="crl-wrap">',o=0;o<t.length;o++){var a=t[o],r=jQuery(e[this.counter]);cmt.utils.object.hasProperty(a,"cr")?(r.addClass("cr-wrap"),n+='<div class="cr cr-w-'+a.cr.w+" cr-h-"+a.cr.h+'">'+e[this.counter].outerHTML+"</div>",this.counter++):cmt.utils.object.hasProperty(a,"cl")?(r.addClass("cl-wrap"),n+='<div class="cl cl-w-'+a.cl.w+" cl-h-"+a.cl.h+'">'+e[this.counter].outerHTML+"</div>",this.counter++):cmt.utils.object.hasProperty(a,"cb")?n+='<div class="cb cb-w-'+a.cb.w+" cb-h-"+a.cb.h+'"></div>':cmt.utils.object.hasProperty(a,"cle")?(n+='<div class="cl cl-w-'+a.cle.w+" cl-h-"+a.cle.h+'">',cmt.utils.object.hasProperty(a.cle,"c")&&(n+=this.generateConfigView(a.cle.c,e,"cle-wrap")),n+="</div>"):cmt.utils.object.hasProperty(a,"cre")&&(n+='<div class="cr cr-w-'+a.cre.w+" cr-h-"+a.cre.h+'">',cmt.utils.object.hasProperty(a.cre,"c")&&(n+=this.generateConfigView(a.cre.c,e,"cre-wrap")),n+="</div>")}return n+"</div>"},cmt.components.base.GalleryComponent=function(){this.counter=1,this.idKey="cmt-gallery-",this.indexKey="gl-",this.galleries={},this.options=null},cmt.components.base.GalleryComponent.inherits(cmt.components.base.BaseComponent),cmt.components.base.GalleryComponent.prototype.defaults={onItemClick:null,collage:!1,collageLimit:5,collageConfig:null,lightbox:!1,lightboxBkg:!0,lightboxId:"lightbox-slider"},cmt.components.base.GalleryComponent.prototype.init=function(t){this.options=jQuery.extend({},this.defaults,t)},cmt.components.base.GalleryComponent.prototype.resetOptions=function(t){this.options=jQuery.extend({},this.defaults,t)},cmt.components.base.GalleryComponent.prototype.initGalleries=function(t){var i=this;t.each(function(){var t=jQuery(this),e=new cmt.components.base.Gallery(i,t);e.init(),t.attr("id",i.idKey+i.counter),t.attr("data-idx",i.counter),i.galleries[i.indexKey+i.counter]=e,i.counter++})},cmt.components.base.GalleryComponent.prototype.normaliseGalleries=function(){var t=this.galleries;for(var e in t)t[e].normalise()},cmt.components.base.GalleryComponent.prototype.addItem=function(t,e){this.galleries[this.indexKey+t].addItem(e)},cmt.components.base.GalleryComponent.prototype.removeItem=function(t,e){this.galleries[this.indexKey+t].removeItem(e)},cmt.components.base.Gallery=function(t,e){this.component=t,this.options=t.options,this.element=e,this.width=0,this.height=0,this.itemWidth=0,this.itemsCount=0,this.itemsWrapper=null,this.items=null},cmt.components.base.Gallery.prototype.init=function(){this.initView(),this.normalise(),this.indexItems()},cmt.components.base.Gallery.prototype.initView=function(){var e=this,t=this.options,i=this.element.children();if(t.collage&&0<i.length&&i.length<=t.collageLimit){this.element.css("height","auto");var n=new cmt.components.base.Collage;n.limit=t.collageLimit,n.config=null!=t.collageConfig?t.collageConfig:n.config;var o=n.generateView(this.element);return this.element.html(o),this.items=this.element.find(".cl-wrap, .cr-wrap"),this.items.each(function(){var t=jQuery(this);e.resetItem(t)}),void this.indexItems()}i.each(function(){jQuery(this).addClass("gallery-item")}),i=this.element.find(".gallery-item").detach();this.element.html('<div class="gallery-items-wrap"><div class="gallery-items"></div></div>'),this.itemsWrapper=this.element.find(".gallery-items"),this.element.find(".gallery-items").append(i)},cmt.components.base.Gallery.prototype.normalise=function(){var e=this,t=this.element;this.width=t.width(),this.height=t.height(),this.items=t.find(".gallery-item"),this.itemWidth=this.items.outerWidth(),this.itemsCount=this.items.length,this.items.each(function(){var t=jQuery(this);t.css({width:e.itemWidth}),e.resetItem(t)})},cmt.components.base.Gallery.prototype.indexItems=function(){this.items.each(function(t){jQuery(this).attr("data-idx",t)})},cmt.components.base.Gallery.prototype.addItem=function(t){this.items.each(function(){var t=jQuery(this),e=parseInt(t.attr("data-idx"))+1;t.attr("data-idx",e)});var e=this.itemsWrapper.find(".gallery-item[data-idx=1]");0==e.length?(this.itemsWrapper.append(t),e=this.itemsWrapper.find(":first-child")[0],e=jQuery(e)):(this.itemsWrapper.find(".gallery-item[data-idx=1]").before(t),e=e.prev()),e.attr("data-idx",0),e.addClass("gallery-item"),this.normalise()},cmt.components.base.Gallery.prototype.removeItem=function(i){this.itemsWrapper.find(".gallery-item[data-idx="+i+"]").remove(),this.items.each(function(){var t=jQuery(this),e=parseInt(t.attr("data-idx"));i<e&&t.attr("data-idx",e-1)}),this.normalise()},cmt.components.base.Gallery.prototype.resetItem=function(t){var e=this,i=this.options,n=this.element;null!==i.onItemClick&&(t.unbind("click"),t.click(function(){i.onItemClick(n,t,t.attr("data-idx"))})),i.lightbox&&t.click(function(){e.showLightbox(t,t.attr("data-idx"))})},cmt.components.base.Gallery.prototype.showLightbox=function(t,o){var a=this,e=this.element,i=this.options.lightboxId,r=jQuery("#"+i),n=jQuery(window).width(),s=jQuery(window).height(),l=r.find(".lightbox-data"),c=n/12,d=s/12;l.css({top:d/2,left:c/2,width:11*c,height:11*d}),a.options.lightboxBkg&&r.find(".lightbox-data-bkg").addClass("lightbox-bkg-wrap");var u='<div class="slider slider-basic slider-lightbox">';e.find(".gallery-item, .item, .cl-wrap, .cr-wrap").each(function(){var t=jQuery(this),e=t.attr("data-idx"),i=t.attr("thumb-url"),n=t.attr("image-url");o==e?(u+='<div class="active"><div class="bkg-image" style="background-image: url('+i+');" image-url="'+n+'"></div></div>',a.options.lightboxBkg?r.find(".lightbox-data-bkg").css("background-image","url("+n+")"):r.find(".lightbox-data-bkg").html('<img src="'+n+'"/>')):u+='<div><div class="bkg-image" style="background-image: url('+i+');" image-url="'+n+'"></div></div>'}),u+="</div>",l.find(".wrap-gallery").html(u),r.hasClass("popup-modal")&&jQuery("body").css({overflow:"hidden",height:jQuery(window).height()}),r.fadeIn("slow"),l.find(".slider-lightbox").cmtSlider({lControlContent:'<i class="fa fa-2x fa-angle-left valign-center"></i>',rControlContent:'<i class="fa fa-2x fa-angle-right valign-center"></i>',circular:!1,onSlideClick:a.setLightboxBkg})},cmt.components.base.Gallery.prototype.setLightboxBkg=function(t,e,i){var n=e.find(".bkg-image").attr("image-url"),o=t.closest(".lightbox-slider-wrap").find(".lightbox-data-bkg");t.find(".slide").removeClass("active"),e.addClass("active"),o.hide(),o.hasClass("lightbox-bkg-wrap")?o.css("background-image","url("+n+")"):o.html('<img src="'+n+'"/>'),o.fadeIn("slow")},cmt.components.base.SliderComponent=function(){this.counter=1,this.idKey="cmt-slider-",this.indexKey="sl-",this.sliders={},this.options=null},cmt.components.base.SliderComponent.inherits(cmt.components.base.BaseComponent),cmt.components.base.SliderComponent.prototype.defaults={lControlContent:null,rControlContent:null,smallerContent:null,onSlideClick:null,preSlideChange:null,postSlideChange:null,circular:!0,autoScroll:!1,autoScrollType:"left",autoScrollDuration:5e3,stopOnHover:!0,collage:!1,collageLimit:5,collageConfig:null,lightbox:!1,lightboxBkg:!0,lightboxId:"lightbox-slider"},cmt.components.base.SliderComponent.prototype.init=function(t){this.options=jQuery.extend({},this.defaults,t)},cmt.components.base.SliderComponent.prototype.resetOptions=function(t){this.options=jQuery.extend({},this.defaults,t)},cmt.components.base.SliderComponent.prototype.initSliders=function(t){var i=this;t.each(function(){var t=jQuery(this),e=new cmt.components.base.Slider(i,t);e.init(),t.attr("id",i.idKey+i.counter),t.attr("data-idx",i.counter),i.sliders[i.indexKey+i.counter]=e,i.counter++})},cmt.components.base.SliderComponent.prototype.normaliseSliders=function(){var t=this.sliders;for(var e in t)t[e].normalise()},cmt.components.base.SliderComponent.prototype.addSlide=function(t,e){this.sliders[this.indexKey+t].addSlide(e)},cmt.components.base.SliderComponent.prototype.removeSlide=function(t,e){this.sliders[this.indexKey+t].removeSlide(e)},cmt.components.base.Slider=function(t,e){this.component=t,this.options=t.options,this.element=e,this.leftControl=null,this.rightControl=null,this.width=0,this.height=0,this.slideWidth=0,this.slidesCount=0,this.filmstrip=null,this.slides=null},cmt.components.base.Slider.prototype.init=function(){var t=this.options;this.initView(),this.normalise(),this.indexSlides(),t.autoScroll&&this.startAutoScroll()},cmt.components.base.Slider.prototype.initView=function(){var e=this,t=this.options,i=this.element.children();if(t.collage&&0<i.length&&i.length<=t.collageLimit){this.element.css("height","auto");var n=new cmt.components.base.Collage;n.limit=t.collageLimit,n.config=null!=t.collageConfig?t.collageConfig:n.config;var o=n.generateView(this.element);return this.element.html(o),this.slides=this.element.find(".cl-wrap, .cr-wrap"),this.slides.each(function(){var t=jQuery(this);e.resetSlide(t)}),void this.indexSlides()}i.each(function(){jQuery(this).addClass("slider-slide")}),i=this.element.find(".slider-slide").detach();this.element.html('<div class="slider-slides-wrap"><div class="slider-slides"></div></div><div class="slider-control slider-control-left"></div><div class="slider-control slider-control-right"></div>'),this.element.find(".slider-slides").append(i)},cmt.components.base.Slider.prototype.normalise=function(){var e=this,t=this.options,i=this.element;this.leftControl=i.find(".slider-control-left"),this.rightControl=i.find(".slider-control-right"),this.width=i.width(),this.height=i.height(),this.filmstrip=i.find(".slider-slides"),this.slides=i.find(".slider-slide"),this.slideWidth=this.slides.outerWidth(),this.slidesCount=this.slides.length,this.filmstrip.width(this.slideWidth*this.slidesCount);var n=0;this.slides.each(function(){var t=jQuery(this);t.css({width:e.slideWidth,left:n}),n+=e.slideWidth,e.resetSlide(t)}),this.filmstrip.width()<i.width()&&null!==t.smallerContent&&t.smallerContent(i,this.filmstrip),this.initControls()},cmt.components.base.Slider.prototype.indexSlides=function(){this.slides.each(function(t){jQuery(this).attr("data-idx",t)})},cmt.components.base.Slider.prototype.initControls=function(){var t=this,e=this.options,i=this.element;if(this.filmstrip.width()<i.width())return this.leftControl.hide(),void this.rightControl.hide();this.leftControl.show(),this.rightControl.show();var n=e.lControlContent,o=e.rControlContent;this.leftControl.html(n),this.rightControl.html(o),e.circular||(this.leftControl.hide(),this.rightControl.show()),this.leftControl.unbind("click"),this.leftControl.click(function(){e.circular?t.showPrevSlide():t.moveToRight()}),this.rightControl.unbind("click"),this.rightControl.click(function(){e.circular?t.showNextSlide():t.moveToLeft()})},cmt.components.base.Slider.prototype.addSlide=function(t){this.slides.each(function(){var t=jQuery(this),e=parseInt(t.attr("data-idx"))+1;t.attr("data-idx",e)});var e=this.filmstrip.find(".slider-slide[data-idx=1]");0==e.length?(this.filmstrip.append(t),e=this.filmstrip.find(":first-child")[0],e=jQuery(e)):(this.filmstrip.find(".slider-slide[data-idx=1]").before(t),e=e.prev()),e.attr("data-idx",0),e.addClass("slider-slide"),this.normalise()},cmt.components.base.Slider.prototype.removeSlide=function(i){this.filmstrip.find(".slider-slide[data-idx="+i+"]").remove(),this.slides.each(function(){var t=jQuery(this),e=parseInt(t.attr("data-idx"));i<e&&t.attr("data-idx",e-1)}),this.normalise()},cmt.components.base.Slider.prototype.resetSlide=function(t){var e=this,i=this.options,n=this.element;null!==i.onSlideClick&&(t.unbind("click"),t.click(function(){i.onSlideClick(n,t,t.attr("data-idx"))})),i.lightbox&&t.click(function(){e.showLightbox(t,t.attr("data-idx"))})},cmt.components.base.Slider.prototype.resetSlides=function(){var t=this,e=0;this.slides=this.filmstrip.find(".slider-slide"),this.filmstrip.css({left:"0px",right:""}),this.slides.each(function(){jQuery(this).css({left:e+"px",right:""}),e+=t.slideWidth})},cmt.components.base.Slider.prototype.showNextSlide=function(){var e=this,t=this.options,i=this.element,n=this.slides.first();null!==t.preSlideChange&&t.preSlideChange(i,n,n.attr("data-idx")),this.filmstrip.animate({left:-this.slideWidth},{duration:500,complete:function(){var t=e.slides.first();t.insertAfter(e.slides.eq(e.slides.length-1)),t.css("right",-e.slideWidth),e.resetSlides()}}),n=this.slides.first(),null!==t.postSlideChange&&t.postSlideChange(i,n,n.attr("data-idx"))},cmt.components.base.Slider.prototype.showPrevSlide=function(){var e=this,t=this.options,i=this.element,n=this.slides.first();null!==t.preSlideChange&&t.preSlideChange(i,n,n.attr("data-idx"));var o=this.slides.last();o.insertBefore(this.slides.eq(0)),o.css("left",-this.slideWidth),this.filmstrip.animate({left:this.slideWidth},{duration:500,complete:function(){var t=jQuery(this).parent();e.resetSlides(t)}}),n=this.slides.first(),null!==t.postSlideChange&&t.postSlideChange(i,n,n.attr("data-idx"))},cmt.components.base.Slider.prototype.startAutoScroll=function(){var e=this,i=this.element,n=this.options;setInterval(function(){if("left"==n.autoScrollType){var t=i.attr("mouse-over");if(n.stopOnHover&&null!=t&&t)return;e.showNextSlide()}else if("right"==n.autoScrollType){t=i.attr("mouse-over");if(n.stopOnHover&&null!=t&&t)return;e.showPrevSlide(i)}},n.autoScrollDuration)},cmt.components.base.Slider.prototype.moveToLeft=function(){var t=this,e=this.element,i=this.slides.first().outerWidth(),n=e.outerWidth(),o=this.filmstrip.outerWidth(),a=this.filmstrip.position().left,r=i,s=a-r;n-r<o+s&&this.filmstrip.animate({left:s},{duration:500,complete:function(){t.filmstrip.outerWidth()+(t.filmstrip.position().left-r)<n-r&&t.rightControl.hide(),t.leftControl.is(":hidden")&&t.leftControl.fadeIn("fast")}})},cmt.components.base.Slider.prototype.moveToRight=function(){var t=this,e=this.filmstrip.position().left,i=this.slideWidth,n=e;n<-this.slideWidth/2?(n=e+i,this.filmstrip.animate({left:n},{duration:500,complete:function(){t.filmstrip.position().left>-t.slideWidth/2&&(t.leftControl.hide(),t.filmstrip.position({at:"left top"})),t.rightControl.is(":hidden")&&t.rightControl.fadeIn("fast")}})):(this.leftControl.hide(),this.filmstrip.position({at:"left top"}))},cmt.components.base.Slider.prototype.showLightbox=function(t,o){var a=this,e=this.element,i=this.options.lightboxId,r=jQuery("#"+i),n=jQuery(window).width(),s=jQuery(window).height(),l=r.find(".lightbox-data"),c=n/12,d=s/12;l.css({top:d/2,left:c/2,width:11*c,height:11*d}),a.options.lightboxBkg&&r.find(".lightbox-data-bkg").addClass("lightbox-bkg-wrap");var u='<div class="slider slider-basic slider-lightbox">';e.find(".slider-slide, .slide, .cl-wrap, .cr-wrap").each(function(){var t=jQuery(this),e=t.attr("data-idx"),i=t.attr("thumb-url"),n=t.attr("image-url");o==e?(u+='<div class="active"><div class="bkg-image" style="background-image: url('+i+');" image-url="'+n+'"></div></div>',a.options.lightboxBkg?r.find(".lightbox-data-bkg").css("background-image","url("+n+")"):r.find(".lightbox-data-bkg").html('<img src="'+n+'"/>')):u+='<div><div class="bkg-image" style="background-image: url('+i+');" image-url="'+n+'"></div></div>'}),u+="</div>",l.find(".wrap-gallery").html(u),r.hasClass("popup-modal")&&jQuery("body").css({overflow:"hidden",height:jQuery(window).height()}),r.fadeIn("slow"),l.find(".slider-lightbox").cmtSlider({lControlContent:'<i class="fa fa-2x fa-angle-left valign-center"></i>',rControlContent:'<i class="fa fa-2x fa-angle-right valign-center"></i>',circular:!1,onSlideClick:a.setLightboxBkg})},cmt.components.base.Slider.prototype.setLightboxBkg=function(t,e,i){var n=e.find(".bkg-image").attr("image-url"),o=t.closest(".lightbox-slider-wrap").find(".lightbox-data-bkg");t.find(".slide").removeClass("active"),e.addClass("active"),o.hide(),o.hasClass("lightbox-bkg-wrap")?o.css("background-image","url("+n+")"):o.html('<img src="'+n+'"/>'),o.fadeIn("slow")},cmt.components.jquery=cmt.components.jquery||{},function(i){i.fn.cmtAccordian=function(t){var e=i.extend({},i.fn.cmtAccordian.defaults,t);return void this.each(function(){!function(n){var o=n.find(".accordian-trigger"),t=n.find(".accordian-view");t.hide(),e.showFirst&&(jQuery(t[0]).addClass("active"),jQuery(t[0]).slideDown("slow"));o.click(function(){var t=jQuery(this),e=t.next(".accordian-view"),i=n.find(".accordian-view.active");t.hasClass("active")?(t.removeClass("active"),i.removeClass("active"),i.slideUp("slow")):(i.slideUp("slow"),i.removeClass("active"),o.removeClass("active"),jQuery(this).addClass("active"),jQuery(e).addClass("active"),e.slideDown("slow"))})}(i(this))})},i.fn.cmtAccordian.defaults={showFirst:!1}}(jQuery),jQuery.fn.cmtActions=function(e){try{cmt.components.root.getComponent("actions").initElements(this)}catch(t){cmt.components.root.registerComponent("actions","cmt.components.base.ActionsComponent",e).initElements(this)}},function(e){e.fn.cmtAutoFill=function(t){e.extend({},e.fn.cmtAutoFill.defaults,t);return void this.each(function(){var t=e(this);t.find(".auto-fill-text").blur(function(){var t=jQuery(this).closest(".wrap-fill");t.find(".wrap-auto-list").slideUp(),t.find(".fill-clear").val("")})})},e.fn.cmtAutoFill.defaults={}}(jQuery),function(n){n.fn.cmtAutoHide=function(t){n.extend({},n.fn.cmtFormInfo.defaults,t);return void this.each(function(){var e,i,t=n(this);e=t,i=jQuery(e.attr("data-target")),jQuery(window).click(function(t){e.is(t.target)||0!==e.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||(jQuery(i).slideUp(),e.removeClass("active"))})})},n.fn.cmtAutoHide.defaults={animation:"slide"}}(jQuery),function(w){w.fn.cmtBlock=function(t){var g=w.extend({},w.fn.cmtBlock.defaults,t),e=this,v=w(window).height(),y=(w(window).width(),g.blocks),C=Object.keys(y);return e.each(function(){!function(t){var e=g.blockAttr;if(cmt.utils.data.hasAttribute(t,e)&&0<=w.inArray(t.attr(e),C)){var i=y[t.attr(e)],n=i.height,o=i.autoHeight,a=i.fullHeight,r=i.halfHeight,s=i.qtfHeight,l=i.heightAuto,c=i.heightAutoMobile,d=i.heightAutoMobileWidth,u=i.css;if(null!=n&&n&&t.css({height:n+"px"}),null!=l&&l&&(null!=o&&o?t.css({height:"auto"}):null!=n&&n?t.css({height:"auto","min-height":n+"px"}):null!=a&&a?t.css({height:"auto","min-height":v+"px"}):null!=r&&r?t.css({height:"auto","min-height":v/2+"px"}):null!=s&&s?t.css({height:"auto","min-height":.75*v+"px"}):t.css({height:"auto"})),null==n&&null==l&&null!=a&&a&&t.css({height:v+"px"}),null==n&&null==l&&null!=r&&r&&t.css({height:v/2+"px"}),null==n&&null==l&&null!=s&&s&&t.css({height:.75*v+"px"}),null!=c&&c&&window.innerWidth<=d)if(a){t.css({height:"auto","min-height":v+"px"});var p=t.children(".block-content-wrap");p.hasClass("valign-center")&&p.removeClass("valign-center")}else t.css({height:"auto"});var p=t.find(".block-content-wrap"),m=t.find(".block-content");if(void 0!==m&&m.height()>p.height()){var f=m.height()+100+"px",h=m.height()-p.height();p.height(f),f=t.height()+h+100+"px",t.height(f)}null!=u&&u&&t.css(u)}else g.autoHeight&&g.autoHeight&&t.css({height:"auto"}),g.fullHeight&&(g.heightAuto?t.css({height:"auto","min-height":v+"px"}):t.css({height:v+"px"})),g.halfHeight&&(g.heightAuto?t.css({height:"auto","min-height":v/2+"px"}):t.css({height:v/2+"px"})),g.qtfHeight&&(g.heightAuto?t.css({height:"auto","min-height":.75*v+"px"}):t.css({height:.75*v+"px"}))}(w(this))}),void(g.backgroundParallax&&w(window).scroll(function(){var d=w(window).height(),u=w(window).scrollTop(),p=u+d,m=u+d/2;e.each(function(t){var e=w(this),i=e.height(),n=e.offset().top,o=n+i,a=e.children(".block-bkg-parallax");if(null!=a&&0<a.length&&n<p&&u<o){a.width();var r=a.height(),s=r-.5*d,l=i<d?r-i:r-d,c=0+(s-0)*(m-(n-=l))/((o+=l)-n);a.css("background-position","50% "+c+"px")}})}))},w.fn.cmtBlock.defaults={blockAttr:"cmt-block",autoHeight:!0,fullHeight:!1,halfHeight:!1,qtfHeight:!1,heightAuto:!1,backgroundParallax:!0,blocks:{}}}(jQuery),function(e){e.fn.cmtCheckbox=function(t){e.extend({},e.fn.cmtCheckbox.defaults,t);return void this.each(function(){!function(t){if(t.is("[disabled]"))return;var e=t.find("input[type='checkbox']"),i=t.find("input[type='hidden']");1==i.val()&&(e.prop("checked",!0),e.val(1));e.change(function(){e.is(":checked")?(i.val(1),e.val(1)):(i.val(0),e.val(0)),i.trigger("change")})}(e(this))})},e.fn.cmtCheckbox.defaults={}}(jQuery),function(c){c.fn.cmtCounter=function(t){var l=c.extend({},c.fn.cmtCounter.defaults,t);return void this.each(function(){var t,e,i,n,o,a,r,s=c(this);t=s,e=cmt.utils.data.hasAttribute(t,"data-min")?t.attr("data-min"):l.min,i=cmt.utils.data.hasAttribute(t,"data-max")?t.attr("data-max"):l.max,n=cmt.utils.data.hasAttribute(t,"data-val")?t.attr("data-val"):l.val,o=t.find(".counter-inc"),a=t.find(".counter-dec"),(r=t.find(".counter-val")).val(n),o.click(function(){(n=r.val(n))<i&&(n++,r.val(n),i<=n?o.addClass("disabled"):o.removeClass("disabled"))}),a.click(function(){n=r.val(n),e<n&&(n--,r.val(n),n<=e?a.addClass("disabled"):a.removeClass("disabled"))})})},c.fn.cmtCounter.defaults={min:0,max:10,val:0}}(jQuery),function(e){e.fn.cmtFieldGroup=function(t){e.extend({},e.fn.cmtFieldGroup.defaults,t);return void this.each(function(){!function(t){var e=t.find("input[type='checkbox']"),i=t.find("input[type='radio']"),n=cmt.utils.data.hasAttribute(t,"data-reverse");if(0<e.length)e.prop("checked")?a(t,n):r(t,n),t.click(function(){e.prop("checked")?a(t,n):r(t,n)});else if(1==i.length){var o=t.find("input[type='radio']:checked").length;1==o?a(t,n):0==o&&r(t,n),t.find("input[type='radio']").change(function(){1==(o=t.find("input[type='radio']:checked").length)?a(t,n):0==o&&r(t,n)})}else if(1<i.length){var o=parseInt(t.find("input[type='radio']:checked").val());1==o?a(t,n):0==o&&r(t,n),t.find("input[type='radio']").change(function(){1==(o=parseInt(t.find("input[type='radio']:checked").val()))?a(t,n):0==o&&r(t,n)})}}(e(this))});function a(t,e){var i=t.attr("group-target"),n=t.attr("group-alt");e?(jQuery("."+i).hide(),jQuery("."+n).show()):(jQuery("."+i).show(),jQuery("."+n).hide())}function r(t,e){var i=t.attr("group-target"),n=t.attr("group-alt");e?(jQuery("."+i).show(),jQuery("."+n).hide()):(jQuery("."+i).hide(),jQuery("."+n).show())}},e.fn.cmtFieldGroup.defaults={}}(jQuery),function(e){e.fn.cmtFileUploader=function(t){var m=e.extend({},e.fn.cmtFileUploader.defaults,t);return void this.each(function(){!function(t,e,i){s=t,l=s.find(".btn-chooser"),0<l.length&&((m.direct||s.hasClass("file-uploader-direct"))&&(s.addClass("file-uploader-direct"),l.hide(),m.toggle&&(s.find(".chooser-wrap").show(),s.find(".file-wrap").hide())),l.click(function(){m.toggle&&(s.find(".chooser-wrap").fadeToggle("slow"),s.find(".file-wrap").fadeToggle("fast")),s.find(".post-action").hide(),s.find(".file-chooser .input").val(""),f(s)})),n=t,o=e,a=i,r=n.find(".btn-capture"),0<r.length&&(r.click(function(){var t=parseInt(r.attr("data-camera"));if(0==t){var e="mediaDevices"in navigator;if(!e)return void alert("Your browser does not support media devices.");navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){(a=n.find(".file-camera .video")[0]).srcObject=t,o=t,a.play()}).catch(function(t){console.log("Unable to access camera: "+t)}),r.attr("data-camera",1),n.find(".file-preloader .file-preloader-bar").html("")}else{if(null!=o){var i=o.getTracks()[0];i.stop(),(o=null)!=a&&a.load()}r.attr("data-camera",0)}m.toggle&&(n.find(".chooser-wrap").fadeToggle("slow"),n.find(".file-wrap").fadeToggle("fast")),n.find(".post-action").hide(),f(n)}),jQuery(".file-capture").click(function(){null!=o&&function(n,o,a){var r=n.attr("directory"),s=n.attr("type"),l=n.attr("gen"),t=n.find(".file-camera .canvas"),e=t.attr("data-name");(t=t[0]).getContext("2d").drawImage(a,0,0,t.width,t.height);var i=t.toDataURL("image/png"),c=cmt.utils.data.dataURItoBlob(i),d=n.find(".file-preloader .file-preloader-bar"),u=new FormData;d.html("Uploading file"),u.append("file",c,e);var p=fileUploadUrl+"?directory="+encodeURIComponent(r)+"&type="+encodeURIComponent(s)+"&gen="+encodeURIComponent(l);jQuery.ajax({type:"POST",url:p,data:u,cache:!1,contentType:!1,processData:!1,dataType:"json"}).done(function(t){if(d.html("File uploaded"),1==t.result)if(m.uploadListener)m.uploadListener(n,r,s,l,t.data);else{if(h(n,r,s,l,t.data),null!=o){var e=o.getTracks()[0];e.stop(),(o=null)!=a&&a.load()}n.find(".btn-capture").attr("data-camera",0)}else{var i=t.errors;alert(i.error)}f(n)})}(n,o,a)})),t.hasClass("file-uploader-chooser")&&(t.find(".chooser-wrap").show(),t.find(".file-wrap").show(),t.find(".file-dragger").hide());var n,o,a,r;var s,l;!function(e){if(cmt.utils.browser.isFileApi()){var t=e.find(".file-chooser .input");t.change(function(t){d(t,e)});var i=e.find(".file-dragger .drag-wrap");i.bind("dragover",function(t){c(t)}),i.bind("dragleave",function(t){c(t)}),i.bind("drop",function(t){d(t,e)})}else if(cmt.utils.browser.isFormData()){var n=e.attr("directory"),o=e.attr("type"),a=e.attr("gen"),t=e.find(".file-chooser .input");t.change(function(t){!function(i,n,o,a){var r=i.find(".file-preloader .file-preloader-bar"),t=i.find(".file-chooser .input").files[0],e=new FormData;fileName=t.name,r.html("Uploading file"),e.append("file",t);var s=fileUploadUrl+"?directory="+encodeURIComponent(n)+"&type="+encodeURIComponent(o)+"&gen="+encodeURIComponent(a);jQuery.ajax({type:"POST",url:s,data:e,cache:!1,contentType:!1,processData:!1,dataType:"json"}).done(function(t){if(r.html("File uploaded"),1==t.result)m.uploadListener?m.uploadListener(i,n,o,a,t.data):h(i,n,o,a,t.data);else{var e=t.errors;alert(e.error)}f(i)})}(e,n,o,a)})}}(t)}(e(this),null,null)});function f(t){if(cmt.utils.browser.isCanvas()&&"image"==t.attr("type")){var e=t.find(".file-dragger canvas, .file-camera .canvas");if(0<e.length){var i=e[0];i.getContext("2d").clearRect(0,0,i.width,i.height)}}var n=t.find(".file-preloader .file-preloader-bar");cmt.utils.browser.isFileApi()?n.css("width","0%"):cmt.utils.browser.isFormData()&&n.html("")}function c(t){t.stopPropagation(),t.preventDefault(),t.target.className="dragover"==t.type?"dragger-hover":""}function d(t,e){var i=e.attr("directory"),n=e.attr("type"),o=e.attr("gen");c(t);var a=t.target.files||t.originalEvent.dataTransfer.files;if(m.preview&&cmt.utils.browser.isCanvas()&&"image"==n){var r=e.find(".file-dragger canvas");0<r.length&&(r.show(),cmt.utils.image.drawAtCanvasCenter(r[0],a[0]))}!function(n,o,a,r,t){var s=new XMLHttpRequest,e=t.type.toLowerCase(),i=jQuery.inArray(e,m.fileFormats),l=n.find(".file-preloader .file-preloader-bar"),c=new FormData;if(c.append("file",t),l.css("width","0%"),s.upload&&i){s.upload.onprogress=function(t){if(t.lengthComputable){var e=Math.round(100*t.loaded/t.total);l.css("width",e+"%")}},s.onreadystatechange=function(t){if(4==s.readyState&&200==s.status){var e=JSON.parse(s.responseText);if(1==e.result){var i=e.data;m.uploadListener?m.uploadListener(n,o,a,r,i):h(n,o,a,r,i)}else{var i=e.errors;alert(i.error)}f(n)}};var d=fileUploadUrl+"?directory="+encodeURIComponent(o)+"&type="+encodeURIComponent(a)+"&gen="+encodeURIComponent(r);s.open("POST",d,!0),s.send(c)}else alert("File format not allowed.")}(e,i,n,o,a[0])}function h(t,e,i,n,o){o.name,o.extension;switch(null!=i&&void 0!==i||(i=o.type),i){case"image":t.find(".file-data").html("<img src='"+o.tempUrl+"' class='fluid' />"),a(t,i,o);break;case"video":t.find(".file-data").html("<video src='"+o.tempUrl+"' controls class='fluid'>Video not supported.</video>"),a(t,i,o);break;case"document":case"mixed":case"compressed":case"shared":t.find(".file-data").html("<i class='"+m.docSuccessIcon+"'></i>"),a(t,i,o)}m.toggle&&(t.find(".chooser-wrap").fadeToggle("fast"),t.hasClass("file-uploader-chooser")||t.find(".file-wrap").fadeToggle("slow")),t.find(".file-clear").fadeIn(),t.find(".post-action").fadeIn()}function a(t,e,i){var n=t.find(".file-info"),o=t.find(".file-fields");n.find(".name").val(i.name),n.find(".type").val(e),n.find(".extension").val(i.extension),n.find(".change").val(1);var a=o.find(".title").val();null!=a&&0!=a.length||o.find(".title").val(i.title)}},e.fn.cmtFileUploader.defaults={fileFormats:["jpg","jpeg","png","gif","pdf","csv"],direct:!1,uploadListener:null,preview:!0,toggle:!0,docSuccessIcon:"cmti cmti-3x cmti-check"}}(jQuery),function(e){e.fn.cmtFormInfo=function(t){e.extend({},e.fn.cmtFormInfo.defaults,t);return void this.each(function(){var t=e(this);t.find(".box-trigger-form").click(function(){var t=jQuery(this).closest(".box-form"),e=t.find(".box-form-info-wrap"),i=t.find(".box-form-content-wrap");e.is(":visible")?(e.hide(),i.fadeIn("slow")):(e.fadeIn("fast"),i.hide())})})},e.fn.cmtFormInfo.defaults={}}(jQuery),function(i){var n=null,e={init:function(e){try{n.resetOptions(e),n.initGalleries(this)}catch(t){(n=cmt.components.root.registerComponent("gallery","cmt.components.base.GalleryComponent",e)).initGalleries(this)}null!=n&&i(window).resize(function(){n.normaliseGalleries()})},addItem:function(t){var e=parseInt(jQuery(this[0]).attr("data-idx"));n.addItem(e,t)},removeItem:function(t){var e=parseInt(jQuery(this[0]).attr("data-idx"));n.removeItem(e,t)}};i.fn.cmtGallery=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void i.error("CMT Gallery - method "+t+" does not exist."):e.init.apply(this,arguments)}}(jQuery),function(e){e.fn.cmtGrid=function(t){var n=e.extend({},e.fn.cmtGrid.defaults,t);return void this.each(function(){var a,t=e(this);(a=t).find(".grid-sort select").change(function(){var t=window.location.href,e=jQuery(this).val(),i=jQuery(this).find(":selected").attr("data-sort");t="select"===e?cmt.utils.data.removeParam(t,"sort"):cmt.utils.data.updateUrlParam(t,"sort",i),window.location=t}),a.find(".grid-filters select").change(function(){var t=window.location.href,e=jQuery(this).val(),n=jQuery(this).find(":selected"),o=n.attr("data-col"),a=jQuery(this).closest(".grid-filters").attr("data-cols");for(a=a.split(","),i=0;i<a.length;i++)t=cmt.utils.data.removeParam(t,a[i]);"select"!==e&&(t=cmt.utils.data.updateUrlParam(t,o,e)),window.location=t}),a.find(".trigger-report-toggle").click(function(){a.find(".grid-report-wrap").fadeToggle("slow"),jQuery(this).toggleClass("active")}),a.find(".trigger-report-generate").click(function(){var n=window.location.href,t=jQuery(this).closest(".grid-data"),e=t.find(".grid-report"),i=e.find(".report-field");i.each(function(t,e){var i=jQuery(this);n=cmt.utils.data.removeParam(n,i.attr("name")),0<i.val().length&&(n=cmt.utils.data.updateUrlParam(n,i.attr("name"),i.val()))}),n=cmt.utils.data.updateUrlParam(n,"report",1),window.location=n}),a.find(".trigger-report-clear").click(function(){var n=window.location.href,t=jQuery(this).closest(".grid-data"),e=t.find(".grid-report"),i=e.find(".report-field");i.each(function(t,e){var i=jQuery(this);i.val(""),n=cmt.utils.data.removeParam(n,i.attr("name"))}),n=cmt.utils.data.removeParam(n,"report"),window.location=n}),a.find(".grid-search-trigger").click(function(){var t=window.location.href,e=jQuery(this).closest(".grid-data"),i=e.find(".search-field input[name=keywords]").val(),n=e.find(".search-field select").val();0==i.length||"select"===n?(t=cmt.utils.data.removeParam(t,"keywords"),t=cmt.utils.data.removeParam(t,"search")):(t=cmt.utils.data.updateUrlParam(t,"search",n),t=cmt.utils.data.updateUrlParam(t,"keywords",i)),window.location=t}),a.find(".grid-search-input").bind("blur keyup",function(t){if("blur"==t.type||"13"==t.keyCode){var e=window.location.href,i=jQuery(this).val(),n=jQuery(this).attr("column");0==i.length?(e=cmt.utils.data.removeParam(e,"keywords"),e=cmt.utils.data.removeParam(e,"search")):(e=cmt.utils.data.updateUrlParam(e,"search",n),e=cmt.utils.data.updateUrlParam(e,"keywords",i)),window.location=e}}),a.find(".grid-bulk-all").change(function(){jQuery(this).is(":checked")?a.find(".grid-bulk-single").prop("checked",!0):a.find(".grid-bulk-single").prop("checked",!1)}),a.find(".grid-bulk-single").change(function(){var t=jQuery(this),e=t.attr("data-id"),i=".grid-bulk-single[data-id="+e+"]";jQuery(this).is(":checked")?a.find(i).prop("checked",!0):(a.find(i).prop("checked",!1),a.find(".grid-bulk-all").prop("checked",!1))}),a.find(".grid-bulk select").change(function(){var t=jQuery(this).find(":selected"),e=t.attr("data-col"),i=jQuery(this).attr("popup"),n=[],o=a.find(".grid-bulk-single:checked");"select"!==jQuery(this).val()&&(0<o.length?(jQuery("#"+i).find(".action").html(jQuery(this).find(":selected").text()),a.find(".grid-bulk-single:checked").each(function(t,e){var i=jQuery(this).attr("data-id");jQuery.inArray(i,n)<0&&n.push(i)}),jQuery("#"+i).find("input[name=action]").val(jQuery(this).val()),jQuery("#"+i).find("input[name=column]").val(e),jQuery("#"+i).find("input[name=target]").val(n.join(",")),showPopup("#"+i)):alert("Please select at least one row to apply this action."))}),a.find(".wrap-limits select").change(function(){var t=window.location.href,e=jQuery(this).val();"select"===e?(t=cmt.utils.data.removeParam(t,n.pageParam),t=cmt.utils.data.removeParam(t,n.pageLimitParam)):(t=cmt.utils.data.updateUrlParam(t,n.pageParam,1),t=cmt.utils.data.updateUrlParam(t,n.pageLimitParam,e)),window.location=t}),a.find(".trigger-layout-switch").click(function(){var t=jQuery(this),e=t.attr("layout"),i=window.location.href;switch(e){case"data":i=cmt.utils.data.updateUrlParam(i,n.layoutParam,"data");break;case"table":i=cmt.utils.data.updateUrlParam(i,n.layoutParam,"table");break;case"list":i=cmt.utils.data.updateUrlParam(i,n.layoutParam,"list");break;case"card":i=cmt.utils.data.updateUrlParam(i,n.layoutParam,"card")}window.location=i}),a.find(".actions .action-generic").click(function(){var t=parseInt(jQuery(this).attr("target")),e=jQuery(this).attr("popup");if(0<t){var i=jQuery("#"+e),n=i.find("form"),o=jQuery(this).is("[generic]"),a=jQuery(this).attr("action"),r=a.replace(/\s+/g,"-").toLowerCase(),s=o?n.attr("data-action")+t:n.attr("data-action")+"/"+r+"?id="+t;n.attr("action",s),n.find(".action-generic").html(a),n.find(".element-generic").val(a),n.find(".element-action").val(r),showPopup("#"+e)}else alert("Please select valid row.")}),a.find(".grid-title .action-add").click(function(){var t=jQuery(this).attr("popup");showPopup("#"+t)}),a.find(".actions .action-pop").click(function(){var t=parseInt(jQuery(this).attr("target")),e=jQuery(this).attr("popup");if(0<t){var i=jQuery("#"+e),n=i.find("form").attr("action");n=cmt.utils.data.updateUriParam(n,"id",t),i.find("form").attr("action",n),showPopup("#"+e)}else alert("Please select valid row.")})})},e.fn.cmtGrid.defaults={cardIcon:"cmti cmti-grid",listIcon:"cmti cmti-list",pageParam:"page",pageLimitParam:"per-page",layoutParam:"layout"}}(jQuery),function(i){i.fn.cmtHeader=function(t){var o=i.extend({},i.fn.cmtHeader.defaults,t),e=window.innerWidth;return void this.each(function(){var n,t=i(this);n=t,e>o.minWidth&&window.addEventListener("scroll",function(t){var e=window.pageYOffset||document.documentElement.scrollTop,i=o.scrollDistance;i<e?(n.addClass("header-small"),n.hasClass("hidden")&&n.slideDown("slow")):(n.hasClass("header-small")&&!n.hasClass("header-small-ignore")&&n.removeClass("header-small"),n.hasClass("hidden")&&n.slideUp("false"))})})},i.fn.cmtHeader.defaults={minWidth:1024,scrollDistance:300}}(jQuery),function(e){e.fn.cmtIconPicker=function(t){e.extend({},e.fn.cmtIconPicker.defaults,t);return void this.each(function(){var a,t=e(this);(a=t).find(".choose-icon").click(function(){var t=jQuery(this);t.hasClass("disabled")||a.find(".picker-icon-sets").slideToggle("slow")}),a.find(".picker-icon-sets .picker-icon-wrap").click(function(){var t=jQuery(this),e=a.find(".picker-icon-sets"),i=t.find(".picker-icon"),n="picker-icon "+i.attr("icon"),o=a.find(".choose-icon");(o=o.find(".picker-icon")).attr("class",n),a.find(".icon-field").val(i.attr("icon")),e.slideToggle("slow")})})},e.fn.cmtIconPicker.defaults={}}(jQuery),function(C){C.fn.latLongPicker=function(t){var f=C.extend({},C.fn.latLongPicker.defaults,t);return void this.each(function(){!function(t){if(window.google)(function(n){var t=C.extend(!0,{},f.mapOptions),e=n.find(".google-map").get(0),i=n.find(".latitude"),o=n.find(".longitude"),a=n.find(".zoom");0<i.length&&0<o.length&&(i=parseFloat(i.val()),o=parseFloat(o.val()),a=parseInt(a.val()),C.isNumeric(i)||C.isNumeric(o)||(i=f.latitude,o=f.longitude,n.find(".latitude").val(i),n.find(".longitude").val(o)),C.isNumeric(a)&&(t.zoom=a));null==t.mapTypeId&&(t.mapTypeId=google.maps.MapTypeId.ROADMAP);t.center=new google.maps.LatLng(i,o);var r=new google.maps.Map(e,t),s=(l=n,c=r,d=t,u=new google.maps.Marker({position:d.center,map:c,title:f.markerTitle,draggable:!0}),google.maps.event.addListener(u,"dragend",function(t){h(l,c,u.position)}),google.maps.event.addListener(c,"dblclick",function(t){g(l,c,t.latLng,u)}),google.maps.event.addListener(c,"click",function(t){g(l,c,t.latLng,u)}),google.maps.event.addListener(c,"zoom_changed",function(){v(l,c)}),u);var l,c,d,u;if(f.geocoder){var p=new google.maps.Geocoder;n.find(".search-box").change(function(){var t=C(this).val();p.geocode({address:t},function(t,e){if(e==google.maps.GeocoderStatus.OK){var i=t[0].geometry.location;y(n,r,i,s)}})})}if(f.places){var m=new google.maps.places.PlacesService(r);n.find(".search-box").change(function(){var t=C(this).val(),e={query:t};m.textSearch(e,function(t,e){if(e==google.maps.places.PlacesServiceStatus.OK){var i=t[0].geometry.location;y(n,r,i,s)}})})}n.find(".search-ll").change(function(){var t=C(this).val();t=t.split(",");var e=parseFloat(t[0]),i=parseFloat(t[1]);y(n,r,{lat:e,lng:i},s)})})(t)}(C(this))});function h(t,e,i){t.find(".latitude").val(i.lat),t.find(".longitude").val(i.lng),v(t,e)}function g(t,e,i,n){h(t,e,i),n.setPosition(i)}function v(t,e){t.find(".zoom").val(e.getZoom())}function y(t,e,i,n){h(t,e,i),e.setCenter(i),n.setPosition(i)}},C.fn.latLongPicker.defaults={map:null,latitude:0,longitude:0,markerTitle:"My Location",geocoder:!1,places:!0,mapOptions:{zoom:3,mapTypeId:null,mapTypeControl:!1,zoomControlOptions:!0,disableDoubleClickZoom:!0}}}(jQuery),function(a){a.fn.cmtLoginRegister=function(t){a.extend({},a.fn.cmtLoginRegister.defaults,t);return void this.each(function(){var t,e,i,n,o=a(this);e=(t=o).find(".box-login"),i=t.find(".box-signup"),n=t.find(".box-forgot"),t.find(".btn-login").click(function(t){t.preventDefault(),e.is(":visible")?e.slideUp("fast"):(i.slideUp("fast"),n.slideUp("fast"),e.slideDown("slow"))}),t.find(".btn-forgot").click(function(t){t.preventDefault(),n.is(":visible")?n.slideUp("fast"):(i.slideUp("fast"),e.slideUp("fast"),n.slideDown("slow"))}),t.find(".btn-signup").click(function(t){t.preventDefault(),i.is(":visible")?i.slideUp("fast"):(e.slideUp("fast"),n.slideUp("fast"),i.slideDown("slow"))})})},a.fn.cmtLoginRegister.defaults={}}(jQuery),function(e){e.fn.cmtCollapsibleMenu=function(t){e.extend({},e.fn.cmtCollapsibleMenu.defaults,t);return void this.each(function(){var t=e(this);t.find(".collapsible-tab.has-children").click(function(){var t=jQuery(this),e=t.children(".tab-content");t.hasClass("active")||(t.hasClass("expanded")?(t.removeClass("expanded"),e.slideUp("slow")):(t.addClass("expanded"),e.slideDown("slow")))})})},e.fn.cmtCollapsibleMenu.defaults={}}(jQuery),function(a){a.fn.cmtSlidingMenu=function(t){var o=a.extend({},a.fn.cmtSlidingMenu.defaults,t);return void this.each(function(){!function(e){if(o.mainMenu){var t=a(document).height(),i=a(window).width();e.css({top:"0px",left:"0px",height:t,width:i})}null!=o.showTrigger&&a(o.showTrigger).click(function(){e.fadeIn();var t=e.find(".vnav-slider");"left"==o.position?t.animate({left:0}):"right"==o.position&&t.animate({right:0})});null!=o.hideTrigger&&a(o.hideTrigger).click(function(){e.fadeOut();var t=e.find(".vnav-slider");"left"==o.position?t.animate({left:-t.width()}):"right"==o.position&&t.animate({right:-t.width()})});e.find(".btn-close").click(function(){e.fadeOut();var t=e.find(".vnav-slider");"left"==o.position?t.animate({left:-t.width()}):"right"==o.position&&t.animate({right:-t.width()})});var n=e.find(".popup-bkg-filler");0<n.length&&(n.css({top:"0px",left:"0px",height:t,width:i}),n.click(function(){e.fadeOut("fast")}))}(a(this))})},a.fn.cmtSlidingMenu.defaults={position:"left",showTrigger:null,hideTrigger:null,mainMenu:!1}}(jQuery),function(e){e.fn.cmtPopoutGroup=function(t){var o=e.extend({},e.fn.cmtPopoutGroup.defaults,t);return void this.each(function(){var i,n,t=e(this);(n=(i=t).find(".popout-trigger")).click(function(){n.removeClass("active"),jQuery(this).addClass("active");var t="#"+jQuery(this).attr("popout"),e=jQuery(t);if(e.is(":visible"))switch(jQuery(this).removeClass("active"),o.animation){case"down":e.slideUp()}else switch(i.find(".popout").hide(),o.animation){case"down":e.slideDown()}e.find(".popout-close").click(function(){var t=e.attr("popout");switch(i.find(".popout-trigger[popout="+t+"]").removeClass("active"),o.animation){case"down":e.slideUp()}})})})},e.fn.cmtPopoutGroup.defaults={animation:"down"}}(jQuery),function(p){p.fn.cmtPopup=function(t){var s=p.extend({},p.fn.cmtPopup.defaults,t),l=p(document).height(),c=p(window).height(),d=p(window).width();return void this.each(function(){!function(t){var e=t.children(".popup-data"),i=0;cmt.utils.data.hasAttribute(t,"data-top")&&(i=t.attr("data-top"));if(e.children(".popup-close").click(function(){u(t)}),s.modal){t.appendTo("body");var n=t.find(".popup-screen"),o=t.find(".popup-screen-listener");t.hasClass("popup-modal")||(t.css({top:"0px",left:"0px",height:l,width:d}),0<n.length&&n.css({top:"0px",left:"0px",height:c,width:d}),0<o.length&&o.css({top:"0px",left:"0px",height:c,width:d})),0<o.length&&o.click(function(){u(t)}),t.show();var a=e.outerHeight(),r=e.outerWidth();t.hide(),a<=c?e.css({top:c/2-a/2}):e.css({top:10}),r<=d?e.css({left:d/2-r/2}):e.css({left:10,width:d-20}),0<parseInt(i)&&e.css({top:i})}}(p(this))});function u(t){t.fadeOut("slow"),s.modal&&jQuery("body").css({overflow:"",height:"","margin-right":""})}},p.fn.cmtPopup.defaults={modal:!0},p.fn.cmtPopup.reposition=function(t){var e=p(window).height(),i=p(window).width(),n=t.children(".popup-data"),o=n.outerHeight(),a=n.outerWidth(),r=0;cmt.utils.data.hasAttribute(t,"data-top")&&(r=t.attr("data-top")),o<=e?n.css({top:e/2-o/2}):n.css({top:10}),a<=i?n.css({left:i/2-a/2}):n.css({left:10,width:i-20}),0<parseInt(r)&&n.css({top:r+"px"})}}(jQuery),function(u){var e={init:function(t){var d=u.extend({},u.fn.cmtRate.defaults,t);this.each(function(){var i,e,n,o,a,r,s,l,c,t=u(this);t.data("cmtRateSettings",d),e=(i=t).find(".star").length,n=[],o=[],a=[],r=1==i.find(".star.selected").length?parseInt(i.find(".star.selected").attr("star")):0,s=i.hasClass("disabled"),l=i.hasClass("read-only"),c=i.data("cmtRateSettings"),i.find(".star").each(function(){var t=u(this),e=parseInt(t.attr("star"));0<r&&e<=r?(t.html('<i class="'+p(i,e,!0)+'"></i>'),t.css("color",c.filledColor)):r===e&&c.message?message.addClass("selected"):(t.html('<i class="'+p(i,e,!1)+'"></i>'),t.css("color",c.emptyColor)),s?0<r&&e<=r&&t.css("color",c.disabledColor):l?0<r&&e<=r&&t.css("color",c.readonlyColor):(n.push(t),o.push(t.children("i")),c.message&&a.push(i.find("span[star-message="+e+"]")))}),s||l||(i.find(".star").mouseover(function(){var t=parseInt(u(this).attr("star"));m(i,e,t,n,o,a,0)}),i.find(".star").mouseout(function(){m(i,e,r,n,o,a,1)}),i.find(".star").click(function(){var t=parseInt(u(this).attr("star"));r=t,i.find("input").val(jQuery(this).attr("star")),i.find(".star").removeClass("selected"),u(this).addClass("selected"),m(i,e,t,n,o,a,2)}))})},reset:function(){var n,t;t=(n=this).data("cmtRateSettings"),n.find(".star i").each(function(t,e){var i=jQuery(this);i.removeClass(p(n,t+1,!0)),i.addClass(p(n,t+1,!1))}),n.find(".star").css("color",t.emptyColor),n.find(".star-selected").val(0),n.find(".star-message").removeClass("selected")}};function p(t,e,i){var n=t.data("cmtRateSettings");return void 0===i&&(i=!1),e-=1,0<n.same.length?1==n.same.length?n.same[0]:n.same[e]:i?1==n.filled.length?n.filled[0]:n.filled[e]:1==n.empty.length?n.empty[0]:n.empty[e]}function m(t,e,i,n,o,a,r){var s=t.data("cmtRateSettings");s.message&&t.find(".star-message").removeClass("selected");for(var l=1;l<=e;l++){var c=n[l-1],d=o[l-1],u=a[l-1];if(l<=i){switch(r){case 0:c.css("color",s.hoverColor);break;case 1:case 2:c.css("color",s.filledColor)}d.removeClass(p(t,l,!1)),d.addClass(p(t,l,!0)),l==i&&s.message&&u.addClass("selected")}else c.css("color",s.emptyColor),d.removeClass(p(t,l,!0)),d.addClass(p(t,l,!1))}}u.fn.cmtRate=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void u.error("Method "+t+" does not exist in CmtRate Plugin."):e.init.apply(this,arguments)},u.fn.cmtRate.defaults={same:[],empty:["far fa-star"],filled:["fas fa-star"],emptyColor:"black",filledColor:"#A5D75A",hoverColor:"#EF9300",disabledColor:"#7F7F7F",readonlyColor:"#A5D75A",message:!0}}(jQuery),function(u){u.fn.cmtSelect=function(t){var d=u.extend({},u.fn.cmtSelect.defaults,t);return void this.each(function(){!function(t){var e=t.children("option:selected");t.wrap("<div></div>");var i=t.parent();if(d.copyId){var n=t.attr("id");null!=n&&0<n.length&&(t.attr("id",null),i.attr("id",n))}i.addClass("cmt-select-wrap"),null!=d.wrapperClass&&i.addClass(d.wrapperClass);var o='<span class="s-icon">';null!=d.iconClass&&(o='<span class="s-icon '+d.iconClass+'">');null!=d.iconHtml?o+=d.iconHtml+"</span>":o+="</span>";var a="<div class='cmt-select'><div class='cmt-selected'><span class='s-text'>"+e.html()+"</span>"+o+"</div><ul class='cmt-select-list'>";if(d.copyOptionClass){var e=t.find(":selected");if(1==e.length){var r=e.attr("class");a="<div class='cmt-select'><div class='cmt-selected'><span class='s-text "+r+"'>"+e.html()+"</span>"+o+"</div><ul class='cmt-select-list'>"}}t.find("option").each(function(t){if(d.copyOptionClass){var e=jQuery(this).attr("class");a+='<li class="'+e+'" data-value="'+jQuery(this).val()+'">'+jQuery(this).html()+"</li>"}else a+='<li data-value="'+jQuery(this).val()+'">'+jQuery(this).html()+"</li>"}),a+="</ul></div>",i.append(a);i.children(".cmt-select");var s=i.children(".cmt-select").children(".cmt-selected"),l=i.children(".cmt-select").children(".cmt-select-list");l.hide();var c=t.attr("disabled");"disabled"==c||c?s.addClass("disabled"):(s.click(function(t){var e=l.is(":visible");l.hide(),jQuery(document).unbind("keyup"),e||(l.show(),jQuery(document).on("keyup",function(t){var e=String.fromCharCode(t.keyCode);l.children("li").each(function(){var t=jQuery(this);if(t.html().substr(0,1).toUpperCase()==e)return l.animate({scrollTop:t.offset().top-l.offset().top+l.scrollTop()}),!1})})),t.stopPropagation()}),l.children("li").click(function(){var t=jQuery(this),e=t.parents().eq(1);e.children(".cmt-selected").children(".s-text").html(t.html()),e.parent().children("select").val(t.attr("data-value")).change(),l.hide(),jQuery(document).unbind("keyup")}),u(document).on("click",function(t){0===u(t.target).closest(l).length&&(l.hide(),jQuery(document).unbind("keyup"))}))}(u(this))})},u.fn.cmtSelect.defaults={multi:!1,copyId:!1,copyOptionClass:!1,wrapperClass:null,iconClass:null,iconHtml:null},u.fn.cmtSelect.resetSelect=function(t,e){var i=t.find("select");i.html(e);var n=i.children("option:selected"),o=t.find(".cmt-select-list"),a=t.find(".cmt-selected").children(".s-text"),r="";i.children("option").each(function(t){r+='<li data-value="'+jQuery(this).val()+'">'+jQuery(this).html()+"</li>"}),a.html(n.html()),o.html(r),o.children("li").click(function(){var t=jQuery(this);t.parents().eq(1);a.html(t.html()),i.val(t.attr("data-value")).change(),o.hide(),jQuery(document).unbind("keyup")})},u.fn.cmtSelect.setValue=function(t,e){var i=t.find("select");i.val(e);var n=i.children("option:selected");t.find(".cmt-selected").children(".s-text").html(n.html())}}(jQuery),function(r){r.fn.cmtMultiSelect=function(t){var a=r.extend({},r.fn.cmtSelect.defaults,t);return void this.each(function(){!function(t){var e='<span class="s-icon">';null!=a.iconClass&&(e='<span class="s-icon '+a.iconClass+'">');null!=a.iconHtml?e+=a.iconHtml+"</span>":e+="</span>";var i='<div class="cmt-selected"><span class="s-text">'+t.attr("title")+"</span>"+e+"</div>";t.prepend(i);var n=t.find(".cmt-select-list");n.hide();var o=t.attr("disabled");"disabled"==o||o?t.addClass("disabled"):(t.find(".cmt-selected").click(function(t){n.is(":visible")?n.slideUp():(n.slideDown("slow"),jQuery(document).on("keyup",function(t){var e=String.fromCharCode(t.keyCode);n.children("li").each(function(){var t=jQuery(this);if(t.html().substr(0,1).toUpperCase()==e)return n.animate({scrollTop:t.offset().top-n.offset().top+n.scrollTop()}),!1})})),t.stopPropagation()}),r(document).on("click",function(t){0===r(t.target).closest(n).length&&(n.slideUp(),jQuery(document).unbind("keyup"))}))}(r(this))})},r.fn.cmtSelect.defaults={wrapperClass:null,iconClass:null,iconHtml:null}}(jQuery),function(i){var n=null,e={init:function(e){try{n.resetOptions(e),n.initSliders(this)}catch(t){(n=cmt.components.root.registerComponent("slider","cmt.components.base.SliderComponent",e)).initSliders(this)}null!=n&&i(window).resize(function(){n.normaliseSliders()})},addSlide:function(t){var e=parseInt(jQuery(this[0]).attr("data-idx"));n.addSlide(e,t)},removeSlide:function(t){var e=parseInt(jQuery(this[0]).attr("data-idx"));n.removeSlide(e,t)}};i.fn.cmtSlider=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void i.error("CMT Slider - method "+t+" does not exist."):e.init.apply(this,arguments)}}(jQuery),function(r){r.fn.cmtSmoothScroll=function(t){var a=r.extend({},r.fn.cmtSmoothScroll.defaults,t);return void this.each(function(){var o,t=r(this);(o=t).on("click",function(t){var e=this.hash;if(null!=e&&0<e.length){t.preventDefault(),o.closest(".nav").find(".smooth-scroll").removeClass("active"),o.addClass("active"),o.closest(".nav").find(".smooth-scroll").closest(".smooth-scroll-wrap").removeClass("active"),o.closest(".smooth-scroll-wrap").addClass("active");var i=jQuery(e),n=0;cmt.utils.data.hasAttribute(i,"data-height-target")?n=jQuery(i.attr("data-height-target")).height():null!=a.heightElement&&(n=a.heightElement.height());var i=r(e);r("html, body").stop().animate({scrollTop:i.offset().top-n},900,"swing",function(){a.changeHash&&(window.location.hash=e)})}})})},r.fn.cmtSmoothScroll.defaults={changeHash:!1,heightElement:null}}(jQuery),function(a){a.fn.cmtTabs=function(t){a.extend({},a.fn.cmtTabs.defaults,t);return void this.each(function(){var t,e,i,n,o=a(this);e=(t=o).find(".tab-links-wrap").first().find(".tab-link"),i=t.find(".tab-content-wrap").first(),n=i.find(".tab-content-wrap .tab-content"),(i=i.find(".tab-content").not(n)).hide(),jQuery(e[0]).addClass("active"),jQuery(i[0]).addClass("active"),jQuery(i[0]).fadeIn("slow"),e.click(function(){var t=jQuery(this).attr("target");e.removeClass("active"),i.removeClass("active"),i.hide(),jQuery(this).addClass("active"),jQuery(t).addClass("active"),jQuery(t).fadeIn("slow")})})},a.fn.cmtTabs.defaults={}}(jQuery),function(u){u.fn.cmtTimePicker=function(t){var l=u.extend({},u.fn.cmtTimePicker.defaults,t);return jQuery("body").append('<div id="'+l.id+'" class="cmt-timepicker '+l.classes+'" style="z-index: 100;"></div>'),void this.each(function(){var t,e,i=u(this);t=i,e=u("#"+l.id),t.attr("autocomplete","off"),t.attr("readonly",!0),t.focusin(function(){c(e),function(t,e){t.append('<div class="cmt-timepicker-header row">\n\t\t\t\t\t\t\t\t<div class="colf colf2 row">\n\t\t\t\t\t\t\t\t\t<div class="cmt-timepicker-apm cmt-timepicker-am colf colf2 align align-center active">AM</div>\n\t\t\t\t\t\t\t\t\t<div class="cmt-timepicker-apm cmt-timepicker-pm colf colf2 align align-center">PM</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="cmt-timepicker-apm cmt-timepicker-mm colf colf2 align align-center">Minutes</div>\n\t\t\t\t\t\t\t</div>'),t.append('<div class="cmt-timepicker-content row">\n\t\t\t\t\t\t\t\t<div class="cmt-timepicker-hr-wrap colf colf2 row">\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-1 active">1</div><div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-2">2</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-3">3</div><div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-4">4</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-5">5</div><div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-6">6</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-7">7</div><div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-8">8</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-9">9</div><div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-10">10</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-11">11</div><div class="colf colf3 cmt-timepicker-hr cmt-timepicker-hr-12">12</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="cmt-timepicker-min-wrap colf colf2 row">\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-0 active">0</div><div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-5">5</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-10">10</div><div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-15">15</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-20">20</div><div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-25">25</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-30">30</div><div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-35">35</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-40">40</div><div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-45">45</div>\n\t\t\t\t\t\t\t\t\t<div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-50">50</div><div class="colf colf3 cmt-timepicker-min cmt-timepicker-min-55">55</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>'),t.append('<div class="cmt-timepicker-footer row">\n\t\t\t\t\t\t\t\t<div class="colf colf2 row">\n\t\t\t\t\t\t\t\t\t<input class="cmt-timepicker-time" type="text" readonly />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="colf colf2">\n\t\t\t\t\t\t\t\t\t<span class="cmt-timepicker-ok btn-icon"><i class="cmti cmti-approve"></i></span>\n\t\t\t\t\t\t\t\t\t<span class="cmt-timepicker-close btn-icon"><i class="cmti cmti-close"></i></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>');var i=e.offset(),n=i.top+e.outerHeight(),o=i.left;t.css({top:n+"px",left:o+"px"}),t.css({width:l.width,height:l.height});var a=e.val();if(0<a.length){var r=a.split(" "),s=r[0].split(":");t.find(".cmt-timepicker-hr").removeClass("active"),t.find(".cmt-timepicker-hr-"+s[0]).addClass("active"),t.find(".cmt-timepicker-min").removeClass("active"),t.find(".cmt-timepicker-min-"+s[1]).addClass("active"),t.find(".cmt-timepicker-apm").removeClass("active"),"AM"===r[1]?t.find(".cmt-timepicker-am").addClass("active"):t.find(".cmt-timepicker-pm").addClass("active")}d(t),t.find(".cmt-timepicker-am, .cmt-timepicker-pm").click(function(){t.find(".cmt-timepicker-apm").removeClass("active"),u(this).addClass("active"),d(t)}),t.find(".cmt-timepicker-hr").click(function(){t.find(".cmt-timepicker-hr").removeClass("active"),u(this).addClass("active"),d(t)}),t.find(".cmt-timepicker-min").click(function(){t.find(".cmt-timepicker-min").removeClass("active"),u(this).addClass("active"),d(t)}),t.find(".cmt-timepicker-ok").click(function(){e.val(t.find(".cmt-timepicker-time").val()),e.trigger("change"),c(t)}),t.find(".cmt-timepicker-close").click(function(){c(t)}),t.fadeIn("slow")}(e,t)})});function c(t){t.fadeOut("fast"),t.html("")}function d(t){var e=t.find(".cmt-timepicker-hr.active").html()+":"+t.find(".cmt-timepicker-min.active").html()+" "+t.find(".cmt-timepicker-apm.active").html();t.find(".cmt-timepicker-time").val(e)}},u.fn.cmtTimePicker.defaults={id:"cmt-el-timepicker",classes:"cmt-timepicker-basic",width:220,height:220}}(jQuery),function(s){s.fn.cmtCircledp=function(t){s.extend({},s.fn.cmtCircledp.defaults,t);return void this.each(function(){var t,e,i,n,o,a,r=s(this);t=r,e=cmt.utils.data.hasAttribute(t,"data-value")?t.attr("data-value"):0,i=t.find(".percent"),n=e/100*360,o=t.find(".circledp-pie-right"),a=t.find(".circledp-pie-left"),i.html(e),n<=180?o.find(".circledp-pie-val").css({transform:"translate(0, 100%) rotate("+n+"deg)"}):(o.find(".circledp-pie-val").css({transform:"translate(0, 100%) rotate(180deg)"}),a.find(".circledp-pie-val").css({transform:"translate(0, 100%) rotate("+(n-180)+"deg)"}))})},s.fn.cmtCircledp.defaults={}}(jQuery),function(e){e.fn.cmtClock=function(t){e.extend({},e.fn.cmtClock.defaults,t);return void this.each(function(){var t=e(this);(function t(e){var i=e.find(".current-time").html(),n=new Date(i),o=n.getDay(),a=n.getHours(),r=n.getMinutes(),s=n.getSeconds();a=a<10?"0"+a:a,r=r<10?"0"+r:r,s=s<10?"0"+s:s,e.find(".day").html(cmt.utils.data.weekDays[o]),e.find(".hours").html(a),e.find(".minutes").html(r),e.find(".seconds").html(s),12<a?e.find(".period").html("PM"):e.find(".period").html("AM"),n.setSeconds(n.getSeconds()+1),e.find(".current-time").html(n.toLocaleString()),setTimeout(function(){t(e)},1e3)})(t)})},e.fn.cmtClock.defaults={digital:!0}}(jQuery),function(e){e.fn.cmtCountdownTimer=function(t){e.extend({},e.fn.cmtCountdownTimer.defaults,t);return void this.each(function(){var t=e(this);(function t(e){var i=parseInt(e.find(".days").html()),n=parseInt(e.find(".hours").html()),o=parseInt(e.find(".minutes").html()),a=parseInt(e.find(".seconds").html());0<a?a--:0===a&&(0<i||0<n||0<o)&&(a=59,0<o?o--:0===o&&(0<i||0<n)&&(o=59,0<n?n--:0===n&&0<i&&(n=23,0<i&&i--))),e.find(".days").html(i),e.find(".hours").html(n),e.find(".minutes").html(o),e.find(".seconds").html(a),setTimeout(function(){t(e)},1e3)})(t)})},e.fn.cmtCountdownTimer.defaults={}}(jQuery),cmt.api={},cmt.api.Root=function(t){this.apps=[],this.activeApps=[]},cmt.api.Root.prototype.mapApplication=function(t,e){null==this.apps[t]&&(this.apps[t]=e)},cmt.api.Root.prototype.getApplication=function(t,e){if(e=void 0!==e?e:{},null==this.apps[t])throw"Application with alias "+t+" is not registered.";if(null==this.activeApps[t]){var i=cmt.utils.object.strToObject(this.apps[t]);i.init(e),this.activeApps[t]=i}return this.activeApps[t]},cmt.api.Root.prototype.setApplication=function(t,e){null==this.activeApps[t]&&(this.activeApps[t]=e)},cmt.api.Root.prototype.registerApplication=function(t,e,i){if(null!=this.apps[t])throw"Application with alias "+t+" is already registered. Cannot register the same alias.";return this.mapApplication(t,e),this.getApplication(t,i)},cmt.api.root=new cmt.api.Root,cmt.api.Application=function(t){this.config={json:!1,basePath:null,csrfGet:!1,errorClass:".error",warnClass:".warn",messageClass:".message",spinnerClass:".spinner"},jQuery.extend(this.config,t);var e=cmt.api.Application.CONTROLLER_DEFAULT;this.controllers=[],this.controllers[e]="cmt.api.controllers.RequestController",this.activeControllers=[],this.services=[],this.activeServices=[]},cmt.api.Application.CONTROLLER_DEFAULT="default",cmt.api.Application.ACTION_DEFAULT="default",cmt.api.Application.STATIC_CONTROLLER="cmt-controller",cmt.api.Application.STATIC_ACTION="cmt-action",cmt.api.Application.STATIC_CUSTOM="cmt-custom",cmt.api.Application.STATIC_ID="id",cmt.api.Application.STATIC_KEEP="cmt-keep",cmt.api.Application.STATIC_ERROR="cmt-error",cmt.api.Application.STATIC_CLICK=".cmt-click",cmt.api.Application.STATIC_CHANGE=".cmt-change",cmt.api.Application.STATIC_KEY_UP=".cmt-key-up",cmt.api.Application.STATIC_BLUR=".cmt-blur",cmt.api.Application.prototype.init=function(t){jQuery.extend(this.config,t)},cmt.api.Application.prototype.mapController=function(t,e){null==this.controllers[t]&&(this.controllers[t]=e)},cmt.api.Application.prototype.getController=function(t,e,i){if(e=void 0!==e?e:{},i=void 0!==i&&i,null==this.controllers[t])throw"Controller with alias "+t+" is not registered.";var n;if(i)return(n=cmt.utils.object.strToObject(this.controllers[t])).init(e),n;null==this.activeControllers[t]&&((n=cmt.utils.object.strToObject(this.controllers[t])).init(e),this.activeControllers[t]=n);return this.activeControllers[t]},cmt.api.Application.prototype.setController=function(t,e){null==this.activeControllers[t]&&(this.activeControllers[t]=e)},cmt.api.Application.prototype.registerController=function(t,e,i){return i=void 0!==i?i:{},this.mapController(t,e),this.getController(t,i,!1)},cmt.api.Application.prototype.findController=function(t,e,i){try{return this.getController(t,e,i)}catch(t){if(console.log(t),console.log("Falling back to default controller."),void 0!==this.controllers[cmt.api.Application.CONTROLLER_DEFAULT])return this.findController(cmt.api.Application.CONTROLLER_DEFAULT)}},cmt.api.Application.prototype.mapService=function(t,e){null==this.services[t]&&(this.services[t]=e)},cmt.api.Application.prototype.getService=function(t,e,i){if(e=void 0!==e?e:{},null==this.services[t])throw"Service with alias "+t+" is not registered.";var n;if(i)return(n=cmt.utils.object.strToObject(this.services[t])).init(e),n;null==this.activeServices[t]&&((n=cmt.utils.object.strToObject(this.services[t])).init(e),this.activeServices[t]=n);return this.activeServices[t]},cmt.api.Application.prototype.setService=function(t,e){null==this.activeServices[t]&&(this.activeServices[t]=e)},cmt.api.Application.prototype.registerService=function(t,e,i){return this.mapService(t,e),this.getService(t,i)},cmt.api.controllers=cmt.api.controllers||{},cmt.api.services=cmt.api.services||{},cmt.api.utils=cmt.api.utils||{},cmt.api.controllers.BaseController=function(t){this.caching=!1},cmt.api.controllers.BaseController.prototype.init=function(t){},cmt.api.controllers.ActionController=function(t){this.requestData=null},cmt.api.controllers.ActionController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.ActionController.prototype.init=function(t){console.log("Initialised default controller.")},cmt.api.controllers.ActionController.prototype.default=function(){return console.log("Executing default action."),!0},cmt.api.controllers.ActionController.prototype.defaultActionPre=function(){return console.log("Pre processing default action."),!0},cmt.api.controllers.ActionController.prototype.defaultActionSuccess=function(t){console.log("Processing success for default action.")},cmt.api.controllers.ActionController.prototype.defaultActionFailure=function(t){console.log("Processing failure for default action.")},cmt.api.controllers.GridController=function(t){this.endpoint=null,this.model=null,this.collection=null,this.rowTemplate=null,this.cardTemplate=null,this.pages=0,this.pageLimit=0,this.lastPage=0},cmt.api.controllers.GridController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.GridController.prototype.init=function(t){console.log("Initialised grid controller.")},cmt.api.controllers.GridController.prototype.allActionPre=function(){return console.log("Pre processing all action."),!0},cmt.api.controllers.GridController.prototype.allActionSuccess=function(t){console.log("Processing success for all action.")},cmt.api.controllers.GridController.prototype.allActionFailure=function(t){console.log("Processing failure for all action.")},cmt.api.controllers.GridController.prototype.createActionPre=function(){return console.log("Pre processing create action."),!0},cmt.api.controllers.GridController.prototype.createActionSuccess=function(t){console.log("Processing success for create action.")},cmt.api.controllers.GridController.prototype.createActionFailure=function(t){console.log("Processing failure for create action.")},cmt.api.controllers.GridController.prototype.updateActionPre=function(){return console.log("Pre processing update action."),!0},cmt.api.controllers.GridController.prototype.updateActionSuccess=function(t){console.log("Processing success for update action.")},cmt.api.controllers.GridController.prototype.updateActionFailure=function(t){console.log("Processing failure for update action.")},cmt.api.controllers.GridController.prototype.deleteActionPre=function(){return console.log("Pre processing delete action."),!0},cmt.api.controllers.GridController.prototype.deleteActionSuccess=function(t){console.log("Processing success for delete action.")},cmt.api.controllers.GridController.prototype.deleteActionFailure=function(t){console.log("Processing failure for delete action.")},cmt.api.controllers.RequestController=function(t){this.requestTrigger=null,this.requestForm=null,this.requestData=null,this.currentRequest=null,this.singleRequest=!1},cmt.api.controllers.RequestController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.RequestController.prototype.init=function(t){console.log("Initialised default controller.")},cmt.api.controllers.RequestController.prototype.defaultActionPre=function(t){return console.log("Pre processing default action."),!0},cmt.api.controllers.RequestController.prototype.defaultActionSuccess=function(t,e){console.log("Processing success for default action.")},cmt.api.controllers.RequestController.prototype.defaultActionFailure=function(t,e){console.log("Processing failure for default action.")},cmt.api.controllers.RestController=function(t){this.endpoint=null,this.model=null,this.collection=null,this.pages=0,this.pageLimit=0,this.lastPage=0},cmt.api.controllers.RestController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.RestController.prototype.init=function(t){console.log("Initialised rest controller.")},cmt.api.controllers.RestController.prototype.getActionPre=function(){return console.log("Pre processing get action."),!0},cmt.api.controllers.RestController.prototype.getActionSuccess=function(t){console.log("Processing success for get action.")},cmt.api.controllers.RestController.prototype.getActionFailure=function(t){console.log("Processing failure for get action.")},cmt.api.controllers.RestController.prototype.postActionPre=function(){return console.log("Pre processing post action."),!0},cmt.api.controllers.RestController.prototype.postActionSuccess=function(t){console.log("Processing success for post action.")},cmt.api.controllers.RestController.prototype.postActionFailure=function(t){console.log("Processing failure for post action.")},cmt.api.controllers.RestController.prototype.putActionPre=function(){return console.log("Pre processing put action."),!0},cmt.api.controllers.RestController.prototype.putActionSuccess=function(t){console.log("Processing success for put action.")},cmt.api.controllers.RestController.prototype.putActionFailure=function(t){console.log("Processing failure for put action.")},cmt.api.controllers.RestController.prototype.deleteActionPre=function(){return console.log("Pre processing delete action."),!0},cmt.api.controllers.RestController.prototype.deleteActionSuccess=function(t){console.log("Processing success for delete action.")},cmt.api.controllers.RestController.prototype.deleteActionFailure=function(t){console.log("Processing failure for delete action.")},cmt.api.services.BaseService=function(t){},cmt.api.services.BaseService.prototype.init=function(t){},cmt.api.utils.request={register:function(r,t){t.each(function(){var e=jQuery(this);e.is("form")&&e.submit(function(t){t.preventDefault(),cmt.api.utils.request.trigger(r,e,!0,null)});var t=e.find("[cmt-app] "+cmt.api.Application.STATIC_CLICK+", .cmt-request "+cmt.api.Application.STATIC_CLICK),i=e.find(cmt.api.Application.STATIC_CLICK).not(t);0<i.length&&i.click(function(t){t.preventDefault(),cmt.api.utils.request.trigger(r,e,!1,jQuery(this))});t=e.find("[cmt-app] "+cmt.api.Application.STATIC_CHANGE+", .cmt-request "+cmt.api.Application.STATIC_CHANGE);var n=e.find(cmt.api.Application.STATIC_CHANGE).not(t);0<n.length&&n.change(function(){cmt.api.utils.request.trigger(r,e,!1,jQuery(this))});t=e.find("[cmt-app] "+cmt.api.Application.STATIC_KEY_UP+", .cmt-request "+cmt.api.Application.STATIC_KEY_UP);var o=e.find(cmt.api.Application.STATIC_KEY_UP).not(t);0<o.length&&o.keyup(function(){cmt.api.utils.request.trigger(r,e,!1,jQuery(this))});t=e.find("[cmt-app] "+cmt.api.Application.STATIC_BLUR+", .cmt-request "+cmt.api.Application.STATIC_BLUR);var a=e.find(cmt.api.Application.STATIC_BLUR).not(t);0<a.length&&a.blur(function(){cmt.api.utils.request.trigger(r,e,!1,jQuery(this))})})},registerTargetApp:function(t,e,i){void 0===i||i?cmt.api.utils.request.register(cmt.api.root.getApplication(t),e.find("[cmt-app="+t+"]")):cmt.api.utils.request.register(cmt.api.root.getApplication(t),e)},trigger:function(t,e,i,n){var o=e.attr(cmt.api.Application.STATIC_CONTROLLER),a=e.attr(cmt.api.Application.STATIC_ACTION);null==o&&(o=cmt.api.Application.CONTROLLER_DEFAULT),null==a&&(a=cmt.api.Application.ACTION_DEFAULT);var r=t.findController(o);r.requestTrigger=n,i?t.config.json?cmt.api.utils.request.handleJsonForm(t,e,r,a):cmt.api.utils.request.handleDataForm(t,e,r,a):cmt.api.utils.request.handleRequest(t,e,r,a)},handleJsonForm:function(t,e,i,n){if(cmt.api.utils.request.preProcessRequest(t,e,i,n)){var o=i.requestData,a=e.attr("method");if(e.is("["+cmt.api.Application.STATIC_CUSTOM+"]"))o=cmt.utils.data.appendCsrf(o);else{var r=null!=i.requestForm?i.requestForm:e;o=null==a||"get"!=a.toLowerCase()||t.config.csrfGet?cmt.utils.data.formToJson(r):cmt.utils.data.formToJson(r,!1)}cmt.api.utils.request.processRequest(t,e,i,n,o)}return!1},handleDataForm:function(t,e,i,n){if(cmt.api.utils.request.preProcessRequest(t,e,i,n)){var o=i.requestData,a=e.attr("method");if(e.is("["+cmt.api.Application.STATIC_CUSTOM+"]"))o=cmt.utils.data.appendCsrf(o);else{var r=null!=i.requestForm?i.requestForm:e;o=null==a||"get"!=a.toLowerCase()||t.config.csrfGet?cmt.utils.data.serialiseForm(r):cmt.utils.data.serialiseForm(r,!1)}cmt.api.utils.request.processRequest(t,e,i,n,o)}return!1},handleRequest:function(t,e,i,n){if(cmt.api.utils.request.preProcessRequest(t,e,i,n)){var o=i.requestData,a=e.attr("method");if(e.is("["+cmt.api.Application.STATIC_CUSTOM+"]"))o=cmt.utils.data.appendCsrf(o);else{var r=null!=i.requestForm?i.requestForm:e;o=null==a||"get"!=a.toLowerCase()||t.config.csrfGet?cmt.utils.data.serialiseElement(r):cmt.utils.data.serialiseElement(r,!1)}cmt.api.utils.request.processRequest(t,e,i,n,o)}return!1},preProcessRequest:function(t,e,i,n){var o=n+"ActionPre",a=null!=i.requestForm?i.requestForm:e;return a.find(t.config.messageClass).css("display","none"),a.find(t.config.warnClass).css("display","none"),a.find(t.config.errorClass).css("display","none"),!(void 0!==i[o]&&!i[o](e))&&(e.find(t.config.spinnerClass).css("display","inline-block"),!0)},processRequest:function(n,o,a,r,t){var e=a.caching,i="post",s=o.attr("action");if(o.attr("method")&&(i=o.attr("method")),null!=n.config.basePath&&(s=n.config.basePath+s),a.singleRequest&&null!=a.currentRequest&&(a.currentRequest=a.currentRequest.abort(),a.currentRequest=null),n.config.json){var l=jQuery.ajax({type:i,url:s,data:t,dataType:"JSON",cache:e,contentType:"application/json;charset=UTF-8",success:function(t,e,i){cmt.api.utils.request.processResponse(n,o,a,r,t)}});a.singleRequest&&(a.currentRequest=l)}else{l=jQuery.ajax({type:i,url:s,data:t,dataType:"JSON",cache:e,success:function(t,e,i){cmt.api.utils.request.processResponse(n,o,a,r,t)}});a.singleRequest&&(a.currentRequest=l)}},processResponse:function(t,e,i,n,o){var a=o.result,r=o.errors,s=null!=i.requestForm?i.requestForm:e;if(1==a)e.is("["+cmt.api.Application.STATIC_KEEP+"]")||(s.find("input[type=text]").not(s.find("input["+cmt.api.Application.STATIC_KEEP+"=1]")).val(""),s.find("input[type=password]").val(""),s.find("textarea").not(s.find("textarea["+cmt.api.Application.STATIC_KEEP+"=1]")).val("")),s.find(t.config.errorClass).css("display","none");else if(0==a)for(var l in r){var c=l,d=r[l],u=s.find(" span["+cmt.api.Application.STATIC_ERROR+'="'+c+'"]');u.html(d),u.css("display","inline-block")}cmt.api.utils.request.postProcessResponse(t,e,i,n,o)},postProcessResponse:function(t,e,i,n,o){var a=o.result,r=null,s=o.message,l=n+"ActionSuccess",c=n+"ActionFailure";1==a?r=e.find(t.config.messageClass+".success"):0==a&&(r=e.find(t.config.messageClass+".error")),r.html(s),r.css("display","inline-block"),e.find(t.config.spinnerClass).hide(),1==a&&void 0!==i[l]?i[l](e,o):0==a&&void 0!==i[c]&&i[c](e,o)},triggerDirect:function(t,e,i,n,o){null==e&&(e=cmt.api.Application.CONTROLLER_DEFAULT),null==i&&(i=cmt.api.Application.ACTION_DEFAULT),null==o&&(o="post");var a=t.findController(e);cmt.api.utils.request.handleDirectRequest(t,a,i,n,o)},handleDirectRequest:function(t,e,i,n,o){if(cmt.api.utils.request.preProcessDirectRequest(e,i)){var a=e.requestData;"post"===o&&(a=cmt.utils.data.appendCsrf(a)),cmt.api.utils.request.processDirectRequest(t,e,i,n,o,a)}return!1},preProcessDirectRequest:function(t,e){var i=e+"ActionPre";return!(void 0!==t[i]&&!t[i]())},processDirectRequest:function(n,o,a,t,e,i){var r=o.caching;if(null!=n.config.basePath&&(t=n.config.basePath+t),o.singleRequest&&null!=o.currentRequest&&(o.currentRequest=o.currentRequest.abort(),o.currentRequest=null),n.config.json){var s=jQuery.ajax({type:e,url:t,data:i,dataType:"JSON",cache:r,contentType:"application/json;charset=UTF-8",success:function(t,e,i){cmt.api.utils.request.processDirectResponse(n,o,a,t)}});o.singleRequest&&(o.currentRequest=s)}else{s=jQuery.ajax({type:e,url:t,data:i,dataType:"JSON",cache:r,success:function(t,e,i){cmt.api.utils.request.postProcessDirectResponse(n,o,a,t)}});o.singleRequest&&(o.currentRequest=s)}},postProcessDirectResponse:function(t,e,i,n){var o=n.result,a=i+"ActionSuccess",r=i+"ActionFailure";1==o&&void 0!==e[a]?e[a](n):0==o&&void 0!==e[r]&&e[r](n)},registerServiceTriggers:function(l){l.each(function(){var e=jQuery(this),i=l.attr("data-app"),n=l.attr("data-service"),o=e.attr("data-handler");e.is("form")&&e.submit(function(t){t.preventDefault(),cmt.api.root.getApplication(i).getService(n)[o](e)});var t=e.find(cmt.api.Application.STATIC_CLICK);0<t.length&&t.click(function(t){t.preventDefault(),cmt.api.root.getApplication(i).getService(n)[o](e)});var a=e.find(cmt.api.Application.STATIC_CHANGE);0<a.length&&a.change(function(){cmt.api.root.getApplication(i).getService(n)[o](e)});var r=e.find(cmt.api.Application.STATIC_KEY_UP);0<r.length&&r.keyup(function(){cmt.api.root.getApplication(i).getService(n)[o](e)});var s=e.find(cmt.api.Application.STATIC_BLUR);0<s.length&&s.blur(function(){cmt.api.root.getApplication(i).getService(n)[o](e)})})}};